{
  "Dockerfile": "- File Path: `Dockerfile`\n- High-Level Purpose: This Dockerfile defines a multi-stage build process to create a minimal Docker image for the Go backend application, including its static frontend assets.\n- Definitions in the File:\n    - Build Stages:\n        - `builder`: Uses `golang:1.21-alpine` to build the Go application binary.\n        - Final Stage: Uses `alpine:latest` as a base for the final, minimal image.\n    - Instructions:\n        - `FROM`: Specifies base images for stages.\n        - `WORKDIR`: Sets the working directory inside the container.\n        - `COPY`: Copies files from the host or previous stages into the container.\n        - `RUN`: Executes commands during the image build (e.g., `go mod download`, `go build`).\n        - `EXPOSE`: Informs Docker that the container listens on the specified network ports at runtime.\n        - `CMD`: Provides the default command to execute when the container starts.\n- Notable Patterns or Logic: Multi-stage Docker build for optimized image size, Go application compilation, static asset inclusion.\n",
  "client/index.html": "- File Path: `client/index.html`\n- High-Level Purpose: This is the main HTML file that serves as the entry point for the client-side single-page application, setting up the basic page structure, including CSS, and loading the main JavaScript bundle.\n- Definitions in the File:\n    - HTML Elements:\n        - `\u003c!DOCTYPE html\u003e`, `\u003chtml\u003e`, `\u003chead\u003e`, `\u003cbody\u003e`: Standard HTML document structure.\n        - `\u003cmeta\u003e` tags: Define character set and viewport.\n        - `\u003ctitle\u003e`: Sets the page title.\n        - `\u003cscript\u003e` tags:\n            - Loads Tailwind CSS from a CDN.\n            - Includes a script for basic Tailwind dark mode configuration.\n            - Loads `js/main.js` as a module, which bootstraps the application.\n        - `\u003cdiv\u003e` with `id=\"app\"`: The main container where the JavaScript application will render its content.\n- Notable Patterns or Logic: Single-page application (SPA) root, CDN usage for external libraries, module-based JavaScript loading.\n",
  "client/js/components/Navbar.js": "- File Path: `client/js/components/Navbar.js`\n- High-Level Purpose: This file defines a reusable client-side navigation bar component that dynamically renders links based on authentication status and includes a theme switcher.\n- Definitions in the File:\n    - Functions:\n        - `Navbar()`: An exported function that creates and returns a `nav` DOM element. It contains an internal `render` function that updates the navbar's content based on the current theme and authentication state.\n        - `render()`: An internal function within `Navbar`'s scope that generates the HTML for the navigation bar, including conditional links for logged-in/logged-out users and a theme toggle button. It also attaches event listeners for theme switching and logout.\n- Notable Patterns or Logic: UI component, DOM manipulation, state subscription (auth and theme), event listeners, conditional rendering.\n",
  "client/js/main.js": "- File Path: `client/js/main.js`\n- High-Level Purpose: This is the main entry point for the client-side JavaScript application, responsible for initializing core functionalities like routing and theme management, and rendering the initial page layout.\n- Definitions in the File:\n    - Variables:\n        - `appContainer`: A module-level variable referencing the main `div` element with `id=\"app\"` in `index.html`.\n    - Functions:\n        - `renderLayout()`: An internal function that clears the `appContainer`, creates and appends the `Navbar` component, and creates a `main` element with `id=\"main-content\"` to serve as the router's content container.\n- Notable Patterns or Logic: Client-side application bootstrap, DOM manipulation, event listener for `DOMContentLoaded`, initialization of router and theme.\n",
  "client/js/router.js": "- File Path: `client/js/router.js`\n- High-Level Purpose: This file implements a client-side routing mechanism for a Single Page Application (SPA), mapping URL paths to specific view components and managing navigation.\n- Definitions in the File:\n    - Variables:\n        - `mainContentContainer`: A module-level variable to store the DOM element where views are rendered.\n        - `routes`: An object mapping URL paths (e.g., '/', '/dashboard') to their corresponding view objects (e.g., `HomeView`, `DashboardView`).\n    - Functions:\n        - `navigate(path)`: An exported function that updates the browser's history and triggers `handleRoute` to render the new view.\n        - `handleRoute()`: An exported function that determines the current path, finds the corresponding view from `routes`, and calls its `render` method on `mainContentContainer`. It renders a 404 message if no route matches.\n        - `initializeRouter(container)`: An exported function that sets the main content container, adds event listeners for `popstate` (browser back/forward) and `click` events on `[data-link]` elements for client-side navigation.\n- Notable Patterns or Logic: Client-side routing, SPA navigation, event delegation, view rendering.\n",
  "client/js/services/authService.js": "- File Path: `client/js/services/authService.js`\n- High-Level Purpose: This file provides a client-side service for interacting with the backend authentication API, encapsulating HTTP requests for login and registration.\n- Definitions in the File:\n    - Constants:\n        - `API_BASE_URL`: A string constant defining the base URL for API endpoints.\n    - Functions:\n        - `handleResponse(response)`: An internal asynchronous function that checks if an HTTP response was successful. If not, it parses the error message from the response JSON and throws an error; otherwise, it returns the parsed JSON data.\n    - Variables:\n        - `AuthService`: An exported object containing methods for authentication.\n            - `login(email, password)`: An asynchronous public method that sends a POST request to `/api/auth/login` with user credentials and returns the response data.\n            - `register(username, email, password)`: An asynchronous public method that sends a POST request to `/api/auth/register` with user registration details and returns the response data.\n- Notable Patterns or Logic: Service layer, API client, asynchronous operations (`fetch`), centralized error handling for API responses.",
  "client/js/state/authState.js": "- File Path: `client/js/state/authState.js`\n- High-Level Purpose: This file manages the client-side authentication state, including storing and retrieving the JWT token from local storage, and providing methods to check login status and notify subscribers of state changes.\n- Definitions in the File:\n    - Variables:\n        - `token`: A module-level variable storing the JWT token, initialized from `localStorage`.\n        - `user`: A module-level variable, currently a placeholder for user details.\n        - `subscribers`: A `Set` to hold callback functions that should be notified when the auth state changes.\n    - Functions:\n        - `notify()`: An internal function that iterates through `subscribers` and calls each callback.\n        - `setToken(newToken)`: An exported function that updates the `token` variable, persists it to `localStorage`, and calls `notify()`.\n        - `getToken()`: An exported function that returns the current `token`.\n        - `isLoggedIn()`: An exported function that returns `true` if a token exists, `false` otherwise.\n        - `logout()`: An exported function that clears the token by calling `setToken(null)`.\n        - `subscribe(callback)`: An exported function that adds a callback to the `subscribers` set and returns an unsubscribe function.\n- Notable Patterns or Logic: Simple state management, local storage persistence, publish-subscribe pattern for state changes.\n",
  "client/js/state/themeState.js": "- File Path: `client/js/state/themeState.js`\n- High-Level Purpose: This file manages the application's theme state (light or dark), including persistence to local storage and applying the theme to the document.\n- Definitions in the File:\n    - Variables:\n        - `currentTheme`: A module-level variable storing the current theme, initialized from local storage or defaulting to 'light'.\n    - Functions:\n        - `applyTheme(theme)`: An internal function that adds or removes the 'dark' class from the `document.documentElement` based on the provided theme.\n        - `getTheme()`: An exported function that returns the `currentTheme`.\n        - `toggleTheme()`: An exported function that switches `currentTheme` between 'light' and 'dark', updates local storage, applies the new theme, and returns the new theme.\n        - `initializeTheme()`: An exported function that applies the `currentTheme` when the application starts.\n- Notable Patterns or Logic: Simple state management, local storage persistence, DOM class manipulation.\n",
  "client/js/views/DashboardView.js": "- File Path: `client/js/views/DashboardView.js`\n- High-Level Purpose: This file defines the content and rendering logic for the application's dashboard page view.\n- Definitions in the File:\n    - Variables:\n        - `DashboardView`: An exported object that represents the dashboard page view.\n            - `render(container)`: A method on `DashboardView` that takes a DOM `container` element and populates its `innerHTML` with the static HTML content for the dashboard.\n- Notable Patterns or Logic: View component, static content rendering.\n",
  "client/js/views/HomeView.js": "- File Path: `client/js/views/HomeView.js`\n- High-Level Purpose: This file defines the content and rendering logic for the application's home page view.\n- Definitions in the File:\n    - Variables:\n        - `HomeView`: An exported object that represents the home page view.\n            - `render(container)`: A method on `HomeView` that takes a DOM `container` element and populates its `innerHTML` with the static HTML content for the home page.\n- Notable Patterns or Logic: View component, static content rendering.\n",
  "client/js/views/auth/LoginView.js": "- File Path: `client/js/views/auth/LoginView.js`\n- High-Level Purpose: This file defines the client-side view component for user login, including the HTML form and the logic to handle form submission and interact with the authentication service.\n- Definitions in the File:\n    - Variables:\n        - `LoginView`: An exported object representing the login view.\n            - `render(container)`: A method on `LoginView` that takes a DOM `container` element, populates its `innerHTML` with the login form, and attaches an event listener to handle form submission. On submission, it calls `AuthService.login`, sets the received JWT token via `setToken`, redirects to `/dashboard` on success, or displays an error message.\n- Notable Patterns or Logic: View component, form handling, asynchronous API calls, client-side navigation, state update (setToken), error display.\n",
  "client/js/views/auth/RegisterView.js": "- File Path: `client/js/views/auth/RegisterView.js`\n- High-Level Purpose: This file defines the client-side view component for user registration, including the HTML form and the logic to handle form submission and interact with the authentication service.\n- Definitions in the File:\n    - Variables:\n        - `RegisterView`: An exported object representing the registration view.\n            - `render(container)`: A method on `RegisterView` that takes a DOM `container` element, populates its `innerHTML` with the registration form, and attaches an event listener to handle form submission. On submission, it calls `AuthService.register`, redirects to `/login` on success, or displays an error message.\n- Notable Patterns or Logic: View component, form handling, asynchronous API calls, client-side navigation, error display.\n",
  "cmd/server/main.go": "- File Path: `cmd/server/main.go`\n- High-Level Purpose: This is the main entry point for the Go backend application, responsible for initializing the database, running migrations, setting up dependencies, and starting the HTTP server.\n- Definitions in the File:\n    - Functions:\n        - `main()`: The application's entry point. It loads environment variables, connects to the PostgreSQL database, runs migrations, initializes repository and use case layers, sets up the Echo router, and starts the HTTP server.\n        - `runMigrations(databaseURL string)`: An internal function that applies database migrations from the `migrations` directory to the specified database URL.\n- Notable Patterns or Logic: Application bootstrap, environment variable configuration, database migration, dependency injection, server startup.\n",
  "go.mod": "- File Path: `go.mod`\n- High-Level Purpose: This file defines the Go module for the `job-app-tracker` project and lists all its direct and indirect external dependencies.\n- Definitions in the File:\n    - Module: `job-app-tracker`\n    - Go Version: `1.21`\n    - Direct Dependencies:\n        - `github.com/golang-jwt/jwt/v5`: For JSON Web Token handling.\n        - `github.com/golang-migrate/migrate/v4`: For database migrations.\n        - `github.com/jackc/pgx/v5`: PostgreSQL driver.\n        - `github.com/jmoiron/sqlx`: SQL extensions for Go.\n        - `github.com/joho/godotenv`: For loading environment variables from `.env` files.\n        - `github.com/labstack/echo/v4`: Web framework.\n        - `golang.org/x/crypto`: Cryptographic utilities, including bcrypt.\n- Notable Patterns or Logic: Go module definition, dependency management.\n",
  "internal/domain/application.go": "- File Path: `internal/domain/application.go`\n- High-Level Purpose: This file defines the core data structures (models) for job applications, companies, roles, and associated notes within the application's domain.\n- Definitions in the File:\n    - Structs:\n        - `Company`: Represents a company with `ID`, `Name`, `NormalizedName`, and `Metadata` (raw JSON).\n        - `Role`: Represents a job role with `ID`, `CompanyID`, `Title`, and `Metadata` (raw JSON).\n        - `Application`: Represents a job application with `ID`, `UserID`, `CompanyID`, `RoleID`, `DateApplied`, `Status`, `Metadata` (raw JSON), and `CurrentNoteID` (nullable).\n        - `ApplicationNote`: Represents a note associated with an application, including `ID`, `ApplicationID`, `UserID`, `Timestamp`, and `Content`.\n- Notable Patterns or Logic: Domain model definition, use of `json.RawMessage` for flexible JSON storage, `sql.NullInt64` for nullable database fields.\n",
  "internal/domain/blog.go": "- File Path: `internal/domain/blog.go`\n- High-Level Purpose: This file defines the core data structures (models) for blog posts and their draft versions within the application's domain.\n- Definitions in the File:\n    - Structs:\n        - `BlogPost`: Represents a published blog post with fields like `ID`, `UserID`, `Title`, `Slug`, `ContentMD`, `ContentHTML`, `Excerpt`, `IsPublic`, timestamps, SEO metadata, and `Tags`.\n        - `DraftVersion`: Represents a draft version of a blog post, including `ID`, `PostID` (nullable), `UserID`, `ContentMD`, `ContentHTML`, `LastSavedAt`, and `IsPublishedVersion`.\n- Notable Patterns or Logic: Domain model definition, use of `sql.NullString` and `sql.NullInt64` for nullable database fields.\n",
  "internal/domain/social.go": "- File Path: `internal/domain/social.go`\n- High-Level Purpose: This file defines the core data structures (models) for social features such as comments, likes, and follows within the application's domain.\n- Definitions in the File:\n    - Types:\n        - `ContentType`: A string type alias used to categorize content (e.g., \"post\", \"comment\").\n    - Constants:\n        - `ContentTypePost`: A `ContentType` constant for posts.\n        - `ContentTypeComment`: A `ContentType` constant for comments.\n    - Structs:\n        - `Comment`: Represents a user comment with `ID`, `PostID`, `UserID`, `ParentCommentID`, `ContentMD`, `ContentHTML`, timestamps, and `DepthLevel`.\n        - `Like`: Represents a user's like on content, including `ID`, `UserID`, `ContentType`, and `ContentID`.\n        - `Follow`: Represents a user following another user, with `ID`, `FollowerUserID`, and `FolloweeUserID`.\n- Notable Patterns or Logic: Domain model definition, enum-like constants for content types.",
  "internal/domain/user.go": "- File Path: `internal/domain/user.go`\n- High-Level Purpose: This file defines the core data structure (model) for a user within the application's domain, representing how user information is stored and accessed.\n- Definitions in the File:\n    - Structs:\n        - `User`: Represents a user with the following fields:\n            - `ID`: `int64`, unique identifier.\n            - `Username`: `string`, user's chosen username.\n            - `Email`: `string`, user's email address.\n            - `HashedPassword`: `string`, the bcrypt hashed password.\n            - `Bio`: `sql.NullString`, optional user biography.\n            - `AvatarURL`: `sql.NullString`, optional URL to user's avatar image.\n            - `Settings`: `json.RawMessage`, flexible JSON storage for user settings.\n            - `CreatedAt`: `time.Time`, timestamp of user creation.\n            - `UpdatedAt`: `time.Time`, timestamp of last update.\n- Notable Patterns or Logic: Domain model definition, use of `sql.NullString` for nullable database fields, `json.RawMessage` for flexible JSON storage.\n",
  "internal/handler/auth_handler.go": "- File Path: `internal/handler/auth_handler.go`\n- High-Level Purpose: This file defines HTTP handlers for user authentication endpoints (registration and login) using the Echo web framework.\n- Definitions in the File:\n    - Structs:\n        - `AuthHandler`: An internal struct that holds a `usecase.UserUseCase` dependency.\n        - `RegisterRequest`: An internal struct defining the expected JSON payload for user registration (Username, Email, Password).\n        - `LoginRequest`: An internal struct defining the expected JSON payload for user login (Email, Password).\n    - Functions:\n        - `NewAuthHandler(uc usecase.UserUseCase)`: An exported constructor function that creates and returns a new `AuthHandler` instance.\n    - Methods:\n        - `Register(c echo.Context)`: A public method on `AuthHandler` that handles POST requests to `/api/auth/register`. It binds the request body to `RegisterRequest`, calls the `userUseCase.Register` method, and returns a JSON response with the created user (without password) or an error.\n        - `Login(c echo.Context)`: A public method on `AuthHandler` that handles POST requests to `/api/auth/login`. It binds the request body to `LoginRequest`, calls the `userUseCase.Login` method, and returns a JSON response with the JWT token on success or an error.\n- Notable Patterns or Logic: HTTP handler, request binding, calling use case layer, error handling, JSON response.\n",
  "internal/handler/middleware.go": "- File Path: `internal/handler/middleware.go`\n- High-Level Purpose: This file defines an authentication middleware for the Echo web framework, responsible for validating JWT tokens from incoming requests and setting user information in the request context.\n- Definitions in the File:\n    - Functions:\n        - `AuthMiddleware(next echo.HandlerFunc)`: An exported middleware function that checks for an `Authorization` header, validates the Bearer token using `util.ValidateJWT`, and if valid, sets `userID` and `username` in the Echo context before calling the next handler. It returns `401 Unauthorized` for invalid or missing tokens.\n- Notable Patterns or Logic: Echo middleware, JWT validation, request context manipulation, authentication.\n",
  "internal/handler/router.go": "- File Path: `internal/handler/router.go`\n- High-Level Purpose: This file configures and sets up the main HTTP router for the Go backend application using the Echo framework, defining API endpoints and serving the Single Page Application (SPA) frontend.\n- Definitions in the File:\n    - Functions:\n        - `spaHandler(staticPath, indexPath string)`: An internal function that returns an `echo.HandlerFunc` to serve static files or fall back to `index.html` for SPA routing.\n        - `NewRouter(userUC usecase.UserUseCase)`: An exported function that initializes a new Echo router, applies global middleware (Logger, Recover), defines API routes for authentication (register, login), and sets up a catch-all route to serve the SPA.\n- Notable Patterns or Logic: Echo web framework, API routing, SPA fallback routing, middleware usage, dependency injection for use cases.\n",
  "internal/repository/interfaces.go": "- File Path: `internal/repository/interfaces.go`\n- High-Level Purpose: This file defines the interfaces for interacting with user data storage, abstracting the underlying database implementation.\n- Definitions in the File:\n    - Interfaces:\n        - `UserRepository`: Defines the contract for user data access operations.\n            - `Create(user *domain.User)`: Method to create a new user in the repository.\n            - `GetByEmail(email string)`: Method to retrieve a user by their email address.\n            - `GetByUsername(username string)`: Method to retrieve a user by their username.\n            - `GetByID(id int64)`: Method to retrieve a user by their unique ID.\n- Notable Patterns or Logic: Repository pattern, interface-based design for loose coupling.\n",
  "internal/repository/postgres/user_repository.go": "- File Path: `internal/repository/postgres/user_repository.go`\n- High-Level Purpose: This file provides a PostgreSQL-specific implementation of the `UserRepository` interface, handling database operations for user data.\n- Definitions in the File:\n    - Structs:\n        - `postgresUserRepository`: An internal struct that holds a `*sqlx.DB` instance for database interaction.\n    - Functions:\n        - `NewPostgresUserRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.UserRepository` instance backed by PostgreSQL.\n    - Methods:\n        - `Create(user *domain.User)`: A public method on `postgresUserRepository` that inserts a new user into the `users` table and populates the user's `ID`, `CreatedAt`, and `UpdatedAt` fields.\n        - `GetByEmail(email string)`: A public method on `postgresUserRepository` that queries the `users` table to find a user by their email. Returns `nil, nil` if no user is found (not an error).\n        - `GetByUsername(username string)`: A public method on `postgresUserRepository` that queries the `users` table to find a user by their username. Returns `nil, nil` if no user is found.\n        - `GetByID(id int64)`: A public method on `postgresUserRepository` that queries the `users` table to find a user by their ID. Returns `nil, nil` if no user is found.\n- Notable Patterns or Logic: Repository pattern implementation, PostgreSQL interaction using `sqlx`, handling `sql.ErrNoRows` for \"not found\" scenarios.\n",
  "internal/usecase/interfaces.go": "- File Path: `internal/usecase/interfaces.go`\n- High-Level Purpose: This file defines the interfaces for user-related business logic operations (use cases), abstracting the concrete implementation of user services.\n- Definitions in the File:\n    - Interfaces:\n        - `UserUseCase`: Defines the contract for user business logic.\n            - `Register(username, email, password string)`: Method to register a new user.\n            - `Login(email, password string)`: Method to authenticate a user and return a token.\n- Notable Patterns or Logic: Use case pattern, interface-based design for loose coupling.\n",
  "internal/usecase/user_service.go": "- File Path: `internal/usecase/user_service.go`\n- High-Level Purpose: This file implements the business logic for user-related operations such as registration and login, acting as a use case layer.\n- Definitions in the File:\n    - Structs:\n        - `userService`: An internal struct that holds a `repository.UserRepository` dependency.\n    - Functions:\n        - `NewUserService(userRepo repository.UserRepository)`: An exported constructor function that creates and returns a new `UserUseCase` instance.\n    - Methods:\n        - `Register(username, email, password string)`: A public method on `userService` that handles user registration. It performs basic validation, checks for existing users by email and username, hashes the password, and then creates the user via the `UserRepository`.\n        - `Login(email, password string)`: A public method on `userService` that handles user login. It retrieves the user by email, checks the password hash, and if successful, generates and returns a JWT token.\n- Notable Patterns or Logic: Use case/service layer, dependency injection, business validation, password hashing/checking, JWT generation.\n",
  "migrations/000001_create_users_table.up.sql": "- File Path: `migrations/000001_create_users_table.up.sql`\n- High-Level Purpose: This SQL migration script creates the `users` table in the database, defining its schema and constraints.\n- Definitions in the File:\n    - SQL Table:\n        - `users`: A table with the following columns:\n            - `id`: `BIGSERIAL` (auto-incrementing primary key).\n            - `username`: `VARCHAR(50)`, unique and not null.\n            - `email`: `VARCHAR(255)`, unique and not null.\n            - `hashed_password`: `VARCHAR(255)`, not null.\n            - `bio`: `TEXT` (nullable).\n            - `avatar_url`: `VARCHAR(255)` (nullable).\n            - `settings`: `JSONB` (nullable, for flexible JSON data).\n            - `created_at`: `TIMESTAMPTZ`, not null, defaults to current timestamp.\n            - `updated_at`: `TIMESTAMPTZ`, not null, defaults to current timestamp.\n- Notable Patterns or Logic: Database migration script, SQL DDL (Data Definition Language).\n",
  "pkg/util/hash.go": "- File Path: `pkg/util/hash.go`\n- High-Level Purpose: This file provides utility functions for securely hashing and comparing passwords using the bcrypt algorithm.\n- Definitions in the File:\n    - Functions:\n        - `HashPassword(password string)`: An exported function that takes a plain-text password and returns its bcrypt hash string and an error if one occurs.\n        - `CheckPasswordHash(password, hash string)`: An exported function that compares a plain-text password with a bcrypt hash, returning `true` if they match and `false` otherwise.\n- Notable Patterns or Logic: Utility package, password security (bcrypt).\n",
  "pkg/util/jwt.go": "- File Path: `pkg/util/jwt.go`\n- High-Level Purpose: This file provides utility functions for generating and validating JSON Web Tokens (JWTs) for user authentication.\n- Definitions in the File:\n    - Variables:\n        - `jwtSecret`: A module-level byte slice holding the secret key for signing JWTs (marked with a TODO to move to config).\n    - Structs:\n        - `Claims`: A struct that embeds `jwt.RegisteredClaims` and adds custom fields `UserID` (int64) and `Username` (string) for JWT payload.\n    - Functions:\n        - `GenerateJWT(userID int64, username string)`: An exported function that creates a new JWT with the given user ID and username, sets an expiration time (24 hours), and signs it with `jwtSecret`.\n        - `ValidateJWT(tokenStr string)`: An exported function that parses and validates a given JWT string using `jwtSecret`, returning the custom `Claims` if valid, or an error otherwise.\n- Notable Patterns or Logic: JWT generation and validation, security utility.\n"
}