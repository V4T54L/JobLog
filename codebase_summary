{
  "Dockerfile": "- File Path: `Dockerfile`\n- High-Level Purpose: This Dockerfile defines a multi-stage build process to create a minimal Docker image for the Go backend application, including its static frontend assets.\n- Definitions in the File:\n    - Build Stages:\n        - `builder`: Uses `golang:1.21-alpine` to build the Go application binary.\n        - Final Stage: Uses `alpine:latest` as a base for the final, minimal image.\n    - Instructions:\n        - `FROM`: Specifies base images for stages.\n        - `WORKDIR`: Sets the working directory inside the container.\n        - `COPY`: Copies files from the host or previous stages into the container.\n        - `RUN`: Executes commands during the image build (e.g., `go mod download`, `go build`).\n        - `EXPOSE`: Informs Docker that the container listens on the specified network ports at runtime.\n        - `CMD`: Provides the default command to execute when the container starts.\n- Notable Patterns or Logic: Multi-stage Docker build for optimized image size, Go application compilation, static asset inclusion.\n",
  "client/index.html": "- File Path: `client/index.html`\n- High-Level Purpose: This is the main HTML file that serves as the entry point for the client-side single-page application, setting up the basic page structure, including CSS, and loading the main JavaScript bundle.\n- Definitions in the File:\n    - HTML Elements:\n        - `\u003c!DOCTYPE html\u003e`, `\u003chtml\u003e`, `\u003chead\u003e`, `\u003cbody\u003e`: Standard HTML document structure.\n        - `\u003cmeta\u003e` tags: Define character set and viewport.\n        - `\u003ctitle\u003e`: Sets the page title.\n        - `\u003cscript\u003e` tags:\n            - Loads Tailwind CSS from a CDN.\n            - Includes a script for basic Tailwind dark mode configuration.\n            - Loads `js/main.js` as a module, which bootstraps the application.\n        - `\u003cdiv\u003e` with `id=\"app\"`: The main container where the JavaScript application will render its content.\n- Notable Patterns or Logic: Single-page application (SPA) root, CDN usage for external libraries, module-based JavaScript loading.\n",
  "client/js/components/ApplicationCard.js": "- File Path: `client/js/components/ApplicationCard.js`\n- High-Level Purpose: This file defines a reusable JavaScript component that renders a single job application as a clickable card, suitable for display in a list.\n- Definitions in the File:\n    - Functions:\n        - `ApplicationCard(app)`: An exported function that takes an `app` object (representing a job application) and returns a dynamically created `\u003ca\u003e` (anchor) DOM element. This element is styled as a card and displays the application's role ID, company ID, status, and formatted application date.\n- Notable Patterns or Logic: UI component, DOM manipulation, client-side navigation (`data-link` attribute).\n",
  "client/js/components/Navbar.js": "- File Path: `client/js/components/Navbar.js`\n- High-Level Purpose: This file defines a dynamic navigation bar component for the client-side application, which adapts its links based on user authentication status and includes functionality for theme switching.\n- Definitions in the File:\n    - Functions:\n        - `Navbar()`: An exported function that creates and returns a `nav` DOM element. It dynamically renders navigation links (e.g., Dashboard, Applications for logged-in users; Login, Register for logged-out users) and a theme toggle button. It subscribes to authentication state changes to automatically re-render.\n    - Variables:\n        - `render`: An internal function within `Navbar` that updates the `nav` element's `innerHTML` based on the current theme and login status, and attaches event listeners for theme switching and logout.\n- Notable Patterns or Logic: UI component, DOM manipulation, state management integration (themeState, authState), publish-subscribe pattern for state changes, client-side navigation.\n",
  "client/js/main.js": "- File Path: `client/js/main.js`\n- High-Level Purpose: This is the main entry point for the client-side JavaScript application, responsible for initializing core functionalities like routing and theme management, and rendering the initial page layout.\n- Definitions in the File:\n    - Variables:\n        - `appContainer`: A module-level variable referencing the main `div` element with `id=\"app\"` in `index.html`.\n    - Functions:\n        - `renderLayout()`: An internal function that clears the `appContainer`, creates and appends the `Navbar` component, and creates a `main` element with `id=\"main-content\"` to serve as the router's content container.\n- Notable Patterns or Logic: Client-side application bootstrap, DOM manipulation, event listener for `DOMContentLoaded`, initialization of router and theme.\n",
  "client/js/router.js": "- File Path: `client/js/router.js`\n- High-Level Purpose: This file implements a client-side router for the single-page application, responsible for mapping URL paths to specific view components, handling browser history, and managing navigation without full page reloads.\n- Definitions in the File:\n    - Variables:\n        - `mainContentContainer`: A module-level variable that stores the DOM element where different views will be rendered.\n        - `routes`: An array of route objects, each containing a `path` (string, potentially with parameters) and a `view` component to render for that path.\n    - Functions:\n        - `pathToRegex(path)`: An internal function that converts a route path string (e.g., `/applications/:id`) into a regular expression for matching against `location.pathname`.\n        - `getParams(match)`: An internal function that extracts path parameters (e.g., `id`) from a regex match result.\n        - `navigate(path)`: An exported function that updates the browser's history state to the given `path` and then triggers the `handleRoute` function to render the corresponding view.\n        - `handleRoute()`: An exported asynchronous function that determines the current URL path, finds the best matching route from the `routes` array, extracts any path parameters, and then calls the `render` method of the matched view component. It includes a basic 404 handler if no route matches.\n        - `initializeRouter(container)`: An exported function that sets the `mainContentContainer`, attaches event listeners for `popstate` (browser back/forward navigation) and `click` events on elements with `data-link` attributes (for internal SPA navigation), and performs an initial route handling.\n- Notable Patterns or Logic: Client-side routing, Single-Page Application (SPA) navigation, regular expressions for path matching, browser History API, event delegation.",
  "client/js/services/applicationService.js": "- File Path: `client/js/services/applicationService.js`\n- High-Level Purpose: This file provides a client-side service for interacting with the backend API to manage job applications, encapsulating authenticated HTTP requests for CRUD operations.\n- Definitions in the File:\n    - Constants:\n        - `API_BASE_URL`: A string constant defining the base URL for the application API endpoints.\n    - Functions:\n        - `handleResponse(response)`: An internal asynchronous function that processes an HTTP response. It checks for `204 No Content` status, parses JSON data, and throws an error if the response is not `ok`.\n        - `authorizedFetch(url, options = {})`: An internal asynchronous function that wraps the standard `fetch` API. It automatically retrieves the JWT token from `authState` and includes it in the `Authorization` header for authenticated requests. It then calls `handleResponse` to process the response.\n    - Variables:\n        - `ApplicationService`: An exported object containing methods for interacting with the application API.\n            - `getApplications()`: Public method to fetch all job applications for the authenticated user.\n            - `getApplication(id)`: Public method to fetch a single job application by its ID.\n            - `createApplication(appData)`: Public method to send a POST request to create a new job application.\n            - `updateApplication(id, appData)`: Public method to send a PUT request to update an existing job application.\n            - `deleteApplication(id)`: Public method to send a DELETE request to remove a job application.\n- Notable Patterns or Logic: Service layer, API client, asynchronous operations (`fetch`), centralized error handling for API responses, JWT authentication.\n",
  "client/js/services/authService.js": "- File Path: `client/js/services/authService.js`\n- High-Level Purpose: This file provides a client-side service for interacting with the backend authentication API, encapsulating HTTP requests for login and registration.\n- Definitions in the File:\n    - Constants:\n        - `API_BASE_URL`: A string constant defining the base URL for API endpoints.\n    - Functions:\n        - `handleResponse(response)`: An internal asynchronous function that checks if an HTTP response was successful. If not, it parses the error message from the response JSON and throws an error; otherwise, it returns the parsed JSON data.\n    - Variables:\n        - `AuthService`: An exported object containing methods for authentication.\n            - `login(email, password)`: An asynchronous public method that sends a POST request to `/api/auth/login` with user credentials and returns the response data.\n            - `register(username, email, password)`: An asynchronous public method that sends a POST request to `/api/auth/register` with user registration details and returns the response data.\n- Notable Patterns or Logic: Service layer, API client, asynchronous operations (`fetch`), centralized error handling for API responses.",
  "client/js/state/authState.js": "- File Path: `client/js/state/authState.js`\n- High-Level Purpose: This file manages the client-side authentication state, including storing and retrieving the JWT token from local storage, and providing methods to check login status and notify subscribers of state changes.\n- Definitions in the File:\n    - Variables:\n        - `token`: A module-level variable storing the JWT token, initialized from `localStorage`.\n        - `user`: A module-level variable, currently a placeholder for user details.\n        - `subscribers`: A `Set` to hold callback functions that should be notified when the auth state changes.\n    - Functions:\n        - `notify()`: An internal function that iterates through `subscribers` and calls each callback.\n        - `setToken(newToken)`: An exported function that updates the `token` variable, persists it to `localStorage`, and calls `notify()`.\n        - `getToken()`: An exported function that returns the current `token`.\n        - `isLoggedIn()`: An exported function that returns `true` if a token exists, `false` otherwise.\n        - `logout()`: An exported function that clears the token by calling `setToken(null)`.\n        - `subscribe(callback)`: An exported function that adds a callback to the `subscribers` set and returns an unsubscribe function.\n- Notable Patterns or Logic: Simple state management, local storage persistence, publish-subscribe pattern for state changes.\n",
  "client/js/state/themeState.js": "- File Path: `client/js/state/themeState.js`\n- High-Level Purpose: This file manages the application's theme state (light or dark), including persistence to local storage and applying the theme to the document.\n- Definitions in the File:\n    - Variables:\n        - `currentTheme`: A module-level variable storing the current theme, initialized from local storage or defaulting to 'light'.\n    - Functions:\n        - `applyTheme(theme)`: An internal function that adds or removes the 'dark' class from the `document.documentElement` based on the provided theme.\n        - `getTheme()`: An exported function that returns the `currentTheme`.\n        - `toggleTheme()`: An exported function that switches `currentTheme` between 'light' and 'dark', updates local storage, applies the new theme, and returns the new theme.\n        - `initializeTheme()`: An exported function that applies the `currentTheme` when the application starts.\n- Notable Patterns or Logic: Simple state management, local storage persistence, DOM class manipulation.\n",
  "client/js/views/DashboardView.js": "- File Path: `client/js/views/DashboardView.js`\n- High-Level Purpose: This file defines the content and rendering logic for the application's dashboard page view.\n- Definitions in the File:\n    - Variables:\n        - `DashboardView`: An exported object that represents the dashboard page view.\n            - `render(container)`: A method on `DashboardView` that takes a DOM `container` element and populates its `innerHTML` with the static HTML content for the dashboard.\n- Notable Patterns or Logic: View component, static content rendering.\n",
  "client/js/views/HomeView.js": "- File Path: `client/js/views/HomeView.js`\n- High-Level Purpose: This file defines the content and rendering logic for the application's home page view.\n- Definitions in the File:\n    - Variables:\n        - `HomeView`: An exported object that represents the home page view.\n            - `render(container)`: A method on `HomeView` that takes a DOM `container` element and populates its `innerHTML` with the static HTML content for the home page.\n- Notable Patterns or Logic: View component, static content rendering.\n",
  "client/js/views/applications/ApplicationDetailView.js": "- File Path: `client/js/views/applications/ApplicationDetailView.js`\n- High-Level Purpose: This file defines the client-side view component responsible for displaying the detailed information of a single job application.\n- Definitions in the File:\n    - Variables:\n        - `ApplicationDetailView`: An exported object representing the application detail view.\n            - `render(container, params)`: An asynchronous method on `ApplicationDetailView` that takes a DOM `container` element and `params` (containing the application ID). It populates the container with loading text, then fetches the application details using `ApplicationService.getApplication`. If successful, it renders the application's role ID, company ID, status, and formatted date applied, along with an \"Edit\" button and a placeholder for notes. It handles cases where the application is not found or an error occurs during fetching.\n- Notable Patterns or Logic: View component, asynchronous data fetching, dynamic content rendering, client-side navigation.\n",
  "client/js/views/applications/ApplicationFormView.js": "- File Path: `client/js/views/applications/ApplicationFormView.js`\n- High-Level Purpose: This file defines the client-side view component for creating a new job application or editing an existing one, providing an HTML form and handling its submission.\n- Definitions in the File:\n    - Variables:\n        - `ApplicationFormView`: An exported object representing the application form view.\n            - `render(container, params)`: An asynchronous method on `ApplicationFormView` that takes a DOM `container` element and `params` (which may contain an application ID for editing). It dynamically generates an HTML form for application details. If `params.id` is present, it fetches existing application data to pre-fill the form. It attaches an event listener to the form to handle submission, calling `ApplicationService.createApplication` or `updateApplication` and then navigating to the application's detail page or displaying an error message.\n- Notable Patterns or Logic: View component, form handling, asynchronous API calls, client-side navigation, conditional rendering (create vs. edit mode), basic error display.\n",
  "client/js/views/applications/ApplicationListView.js": "- File Path: `client/js/views/applications/ApplicationListView.js`\n- High-Level Purpose: This file defines the client-side view component responsible for displaying a list of job applications for the current user, including a button to add new applications.\n- Definitions in the File:\n    - Variables:\n        - `ApplicationListView`: An exported object representing the application list view.\n            - `render(container)`: An asynchronous method on `ApplicationListView` that takes a DOM `container` element. It populates the container with a title, an \"Add New Application\" button, and a loading message. It then fetches the user's applications using `ApplicationService.getApplications` and renders each one using the `ApplicationCard` component. It handles cases where no applications are found or an error occurs during fetching.\n- Notable Patterns or Logic: View component, asynchronous data fetching, dynamic list rendering, client-side navigation, error handling.\n",
  "client/js/views/auth/LoginView.js": "- File Path: `client/js/views/auth/LoginView.js`\n- High-Level Purpose: This file defines the client-side view component for user login, including the HTML form and the logic to handle form submission and interact with the authentication service.\n- Definitions in the File:\n    - Variables:\n        - `LoginView`: An exported object representing the login view.\n            - `render(container)`: A method on `LoginView` that takes a DOM `container` element, populates its `innerHTML` with the login form, and attaches an event listener to handle form submission. On submission, it calls `AuthService.login`, sets the received JWT token via `setToken`, redirects to `/dashboard` on success, or displays an error message.\n- Notable Patterns or Logic: View component, form handling, asynchronous API calls, client-side navigation, state update (setToken), error display.\n",
  "client/js/views/auth/RegisterView.js": "- File Path: `client/js/views/auth/RegisterView.js`\n- High-Level Purpose: This file defines the client-side view component for user registration, including the HTML form and the logic to handle form submission and interact with the authentication service.\n- Definitions in the File:\n    - Variables:\n        - `RegisterView`: An exported object representing the registration view.\n            - `render(container)`: A method on `RegisterView` that takes a DOM `container` element, populates its `innerHTML` with the registration form, and attaches an event listener to handle form submission. On submission, it calls `AuthService.register`, redirects to `/login` on success, or displays an error message.\n- Notable Patterns or Logic: View component, form handling, asynchronous API calls, client-side navigation, error display.\n",
  "cmd/server/main.go": "- File Path: `cmd/server/main.go`\n- High-Level Purpose: This is the main entry point for the Go backend application. It handles environment variable loading, database connection and migrations, initialization of the application's repository and use case layers, and starting the HTTP server.\n- Definitions in the File:\n    - Functions:\n        - `main()`: The primary function executed when the program starts. It loads environment variables, ensures `DATABASE_URL` is set, runs database migrations, establishes a PostgreSQL connection, initializes concrete implementations of `UserRepository`, `CompanyRepository`, `RoleRepository`, and `ApplicationRepository`, then creates `UserUseCase` and `ApplicationUseCase` instances. Finally, it sets up the HTTP router and starts the Echo server.\n        - `runMigrations(databaseURL string)`: An internal function responsible for applying database migrations using the `golang-migrate` library. It logs the migration status, including success, no changes, or errors.\n- Notable Patterns or Logic: Application bootstrap, environment variable loading (`godotenv`), database migration, dependency injection (manual), HTTP server startup.\n",
  "go.mod": "- File Path: `go.mod`\n- High-Level Purpose: This file defines the Go module for the `job-app-tracker` project and lists all its direct and indirect external dependencies.\n- Definitions in the File:\n    - Module: `job-app-tracker`\n    - Go Version: `1.21`\n    - Direct Dependencies:\n        - `github.com/golang-jwt/jwt/v5`: For JSON Web Token handling.\n        - `github.com/golang-migrate/migrate/v4`: For database migrations.\n        - `github.com/jackc/pgx/v5`: PostgreSQL driver.\n        - `github.com/jmoiron/sqlx`: SQL extensions for Go.\n        - `github.com/joho/godotenv`: For loading environment variables from `.env` files.\n        - `github.com/labstack/echo/v4`: Web framework.\n        - `golang.org/x/crypto`: Cryptographic utilities, including bcrypt.\n- Notable Patterns or Logic: Go module definition, dependency management.\n",
  "internal/domain/application.go": "- File Path: `internal/domain/application.go`\n- High-Level Purpose: This file defines the core data structures (models) for job applications, companies, roles, and associated notes within the application's domain.\n- Definitions in the File:\n    - Structs:\n        - `Company`: Represents a company with `ID`, `Name`, `NormalizedName`, and `Metadata` (raw JSON).\n        - `Role`: Represents a job role with `ID`, `CompanyID`, `Title`, and `Metadata` (raw JSON).\n        - `Application`: Represents a job application with `ID`, `UserID`, `CompanyID`, `RoleID`, `DateApplied`, `Status`, `Metadata` (raw JSON), and `CurrentNoteID` (nullable).\n        - `ApplicationNote`: Represents a note associated with an application, including `ID`, `ApplicationID`, `UserID`, `Timestamp`, and `Content`.\n- Notable Patterns or Logic: Domain model definition, use of `json.RawMessage` for flexible JSON storage, `sql.NullInt64` for nullable database fields.\n",
  "internal/domain/blog.go": "- File Path: `internal/domain/blog.go`\n- High-Level Purpose: This file defines the core data structures (models) for blog posts and their draft versions within the application's domain.\n- Definitions in the File:\n    - Structs:\n        - `BlogPost`: Represents a published blog post with fields like `ID`, `UserID`, `Title`, `Slug`, `ContentMD`, `ContentHTML`, `Excerpt`, `IsPublic`, timestamps, SEO metadata, and `Tags`.\n        - `DraftVersion`: Represents a draft version of a blog post, including `ID`, `PostID` (nullable), `UserID`, `ContentMD`, `ContentHTML`, `LastSavedAt`, and `IsPublishedVersion`.\n- Notable Patterns or Logic: Domain model definition, use of `sql.NullString` and `sql.NullInt64` for nullable database fields.\n",
  "internal/domain/social.go": "- File Path: `internal/domain/social.go`\n- High-Level Purpose: This file defines the core data structures (models) for social features such as comments, likes, and follows within the application's domain.\n- Definitions in the File:\n    - Types:\n        - `ContentType`: A string type alias used to categorize content (e.g., \"post\", \"comment\").\n    - Constants:\n        - `ContentTypePost`: A `ContentType` constant for posts.\n        - `ContentTypeComment`: A `ContentType` constant for comments.\n    - Structs:\n        - `Comment`: Represents a user comment with `ID`, `PostID`, `UserID`, `ParentCommentID`, `ContentMD`, `ContentHTML`, timestamps, and `DepthLevel`.\n        - `Like`: Represents a user's like on content, including `ID`, `UserID`, `ContentType`, and `ContentID`.\n        - `Follow`: Represents a user following another user, with `ID`, `FollowerUserID`, and `FolloweeUserID`.\n- Notable Patterns or Logic: Domain model definition, enum-like constants for content types.",
  "internal/domain/user.go": "- File Path: `internal/domain/user.go`\n- High-Level Purpose: This file defines the core data structure (model) for a user within the application's domain, representing how user information is stored and accessed.\n- Definitions in the File:\n    - Structs:\n        - `User`: Represents a user with the following fields:\n            - `ID`: `int64`, unique identifier.\n            - `Username`: `string`, user's chosen username.\n            - `Email`: `string`, user's email address.\n            - `HashedPassword`: `string`, the bcrypt hashed password.\n            - `Bio`: `sql.NullString`, optional user biography.\n            - `AvatarURL`: `sql.NullString`, optional URL to user's avatar image.\n            - `Settings`: `json.RawMessage`, flexible JSON storage for user settings.\n            - `CreatedAt`: `time.Time`, timestamp of user creation.\n            - `UpdatedAt`: `time.Time`, timestamp of last update.\n- Notable Patterns or Logic: Domain model definition, use of `sql.NullString` for nullable database fields, `json.RawMessage` for flexible JSON storage.\n",
  "internal/handler/application_handler.go": "- File Path: `internal/handler/application_handler.go`\n- High-Level Purpose: This file defines HTTP handlers for job application-related API endpoints (create, retrieve, update, delete) using the Echo web framework, interacting with the application's use case layer.\n- Definitions in the File:\n    - Structs:\n        - `ApplicationHandler`: An internal struct that holds a dependency on `usecase.ApplicationUseCase` to perform business logic.\n        - `createApplicationRequest`: An internal struct defining the expected JSON payload structure for creating or updating a job application, including `CompanyName`, `RoleTitle`, `Status`, and `DateApplied`.\n    - Functions:\n        - `NewApplicationHandler(uc usecase.ApplicationUseCase)`: An exported constructor function that creates and returns a new `ApplicationHandler` instance.\n    - Methods:\n        - `CreateApplication(c echo.Context)`: A public method on `ApplicationHandler` that handles POST requests to `/api/applications`. It binds the request body, extracts the `userID` from the context, calls `appUseCase.CreateApplication`, and returns the created application or an error.\n        - `GetApplications(c echo.Context)`: A public method on `ApplicationHandler` that handles GET requests to `/api/applications`. It retrieves the `userID` from the context, calls `appUseCase.GetApplications`, and returns a list of applications or an error.\n        - `GetApplicationByID(c echo.Context)`: A public method on `ApplicationHandler` that handles GET requests to `/api/applications/:id`. It parses the application ID from the path, retrieves the `userID` from the context, calls `appUseCase.GetApplicationByID`, and returns the specific application or a \"not found\" error.\n        - `UpdateApplication(c echo.Context)`: A public method on `ApplicationHandler` that handles PUT requests to `/api/applications/:id`. It parses the application ID, binds the request body, retrieves the `userID`, calls `appUseCase.UpdateApplication`, and returns the updated application or an error.\n        - `DeleteApplication(c echo.Context)`: A public method on `ApplicationHandler` that handles DELETE requests to `/api/applications/:id`. It parses the application ID, retrieves the `userID`, calls `appUseCase.DeleteApplication`, and returns a `204 No Content` status on success.\n- Notable Patterns or Logic: HTTP handler, request binding, path parameter parsing, calling use case layer, error handling, JSON response.\n",
  "internal/handler/auth_handler.go": "- File Path: `internal/handler/auth_handler.go`\n- High-Level Purpose: This file defines HTTP handlers for user authentication endpoints (registration and login) using the Echo web framework.\n- Definitions in the File:\n    - Structs:\n        - `AuthHandler`: An internal struct that holds a `usecase.UserUseCase` dependency.\n        - `RegisterRequest`: An internal struct defining the expected JSON payload for user registration (Username, Email, Password).\n        - `LoginRequest`: An internal struct defining the expected JSON payload for user login (Email, Password).\n    - Functions:\n        - `NewAuthHandler(uc usecase.UserUseCase)`: An exported constructor function that creates and returns a new `AuthHandler` instance.\n    - Methods:\n        - `Register(c echo.Context)`: A public method on `AuthHandler` that handles POST requests to `/api/auth/register`. It binds the request body to `RegisterRequest`, calls the `userUseCase.Register` method, and returns a JSON response with the created user (without password) or an error.\n        - `Login(c echo.Context)`: A public method on `AuthHandler` that handles POST requests to `/api/auth/login`. It binds the request body to `LoginRequest`, calls the `userUseCase.Login` method, and returns a JSON response with the JWT token on success or an error.\n- Notable Patterns or Logic: HTTP handler, request binding, calling use case layer, error handling, JSON response.\n",
  "internal/handler/middleware.go": "- File Path: `internal/handler/middleware.go`\n- High-Level Purpose: This file defines an authentication middleware for the Echo web framework, responsible for validating JWT tokens from incoming requests and setting user information in the request context.\n- Definitions in the File:\n    - Functions:\n        - `AuthMiddleware(next echo.HandlerFunc)`: An exported middleware function that checks for an `Authorization` header, validates the Bearer token using `util.ValidateJWT`, and if valid, sets `userID` and `username` in the Echo context before calling the next handler. It returns `401 Unauthorized` for invalid or missing tokens.\n- Notable Patterns or Logic: Echo middleware, JWT validation, request context manipulation, authentication.\n",
  "internal/handler/router.go": "- File Path: `internal/handler/router.go`\n- High-Level Purpose: This file configures and initializes the Echo web framework router, setting up global middleware, defining API routes for authentication and application management, and serving static frontend assets for the single-page application.\n- Definitions in the File:\n    - Functions:\n        - `NewRouter(userUC usecase.UserUseCase, appUC usecase.ApplicationUseCase)`: An exported function that creates and configures a new Echo router instance. It applies `Logger` and `Recover` middleware globally, initializes `AuthHandler` and `ApplicationHandler` with their respective use cases, defines API groups for `/api/auth` (register, login) and `/api/applications` (CRUD operations, protected by `AuthMiddleware`), and sets up static file serving for the `client` directory with HTML5 mode enabled.\n- Notable Patterns or Logic: Echo web framework, routing, middleware, dependency injection, API grouping, static file serving for SPA.\n",
  "internal/repository/interfaces.go": "- File Path: `internal/repository/interfaces.go`\n- High-Level Purpose: This file defines the Go interfaces for the application's repository layer, establishing contracts for data access operations across various domain entities like users, companies, roles, applications, and application notes.\n- Definitions in the File:\n    - Interfaces:\n        - `UserRepository`: Defines methods for creating, retrieving by email, username, or ID for user data.\n        - `CompanyRepository`: Defines a `FindOrCreate` method for company data.\n        - `RoleRepository`: Defines a `FindOrCreate` method for role data.\n        - `ApplicationRepository`: Defines methods for creating, retrieving by ID, retrieving all for a user, updating, and deleting application data.\n        - `ApplicationNoteRepository`: Defines methods for creating and retrieving all notes for a specific application.\n- Notable Patterns or Logic: Interface definition, repository pattern contract, dependency inversion principle.\n",
  "internal/repository/postgres/application_repository.go": "- File Path: `internal/repository/postgres/application_repository.go`\n- High-Level Purpose: This file provides PostgreSQL-specific implementations for various repositories related to job applications, including companies, roles, applications, and application notes, handling their respective database persistence operations.\n- Definitions in the File:\n    - Structs:\n        - `postgresApplicationRepository`: An internal struct holding a `*sqlx.DB` instance, used for company-related database operations.\n        - `postgresRoleRepository`: An internal struct holding a `*sqlx.DB` instance, used for role-related database operations.\n        - `postgresAppRepo`: An internal struct holding a `*sqlx.DB` instance, used for job application-related database operations.\n        - `postgresAppNoteRepository`: An internal struct holding a `*sqlx.DB` instance, used for application note-related database operations.\n    - Functions:\n        - `NewPostgresApplicationRepository(db *sqlx.DB)`: An exported constructor that returns a new `postgresApplicationRepository` instance.\n        - `NewPostgresRoleRepository(db *sqlx.DB)`: An exported constructor that returns a new `postgresRoleRepository` instance.\n        - `NewPostgresAppRepository(db *sqlx.DB)`: An exported constructor that returns a new `postgresAppRepo` instance.\n        - `NewPostgresAppNoteRepository(db *sqlx.DB)`: An exported constructor that returns a new `postgresAppNoteRepository` instance.\n    - Methods:\n        - `FindOrCreate(company *domain.Company)`: A public method on `postgresApplicationRepository` that inserts a new company into the `companies` table or retrieves the ID of an existing one based on its normalized name.\n        - `FindOrCreate(role *domain.Role)`: A public method on `postgresRoleRepository` that inserts a new role into the `roles` table or retrieves the ID of an existing one based on its company ID and title.\n        - `Create(app *domain.Application)`: A public method on `postgresAppRepo` that inserts a new job application into the `applications` table and populates its ID, `CreatedAt`, and `UpdatedAt` fields.\n        - `GetByID(id int64, userID int64)`: A public method on `postgresAppRepo` that retrieves a specific job application by its ID and associated user ID. Returns `nil, nil` if not found.\n        - `GetAllForUser(userID int64)`: A public method on `postgresAppRepo` that retrieves all job applications belonging to a specific user.\n        - `Update(app *domain.Application)`: A public method on `postgresAppRepo` that updates an existing job application's details.\n        - `Delete(id int64, userID int64)`: A public method on `postgresAppRepo` that deletes a job application by its ID and associated user ID.\n        - `Create(note *domain.ApplicationNote)`: A public method on `postgresAppNoteRepository` that inserts a new application note.\n        - `GetAllForApplication(appID int64, userID int64)`: A public method on `postgresAppNoteRepository` that retrieves all notes for a given application, ensuring the notes belong to an application owned by the specified user.\n- Notable Patterns or Logic: Repository pattern implementation, PostgreSQL interaction using `sqlx`, \"find or create\" logic for related entities, handling `sql.ErrNoRows` for \"not found\" scenarios.\n",
  "internal/repository/postgres/user_repository.go": "- File Path: `internal/repository/postgres/user_repository.go`\n- High-Level Purpose: This file provides a PostgreSQL-specific implementation of the `UserRepository` interface, handling database operations for user data.\n- Definitions in the File:\n    - Structs:\n        - `postgresUserRepository`: An internal struct that holds a `*sqlx.DB` instance for database interaction.\n    - Functions:\n        - `NewPostgresUserRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.UserRepository` instance backed by PostgreSQL.\n    - Methods:\n        - `Create(user *domain.User)`: A public method on `postgresUserRepository` that inserts a new user into the `users` table and populates the user's `ID`, `CreatedAt`, and `UpdatedAt` fields.\n        - `GetByEmail(email string)`: A public method on `postgresUserRepository` that queries the `users` table to find a user by their email. Returns `nil, nil` if no user is found (not an error).\n        - `GetByUsername(username string)`: A public method on `postgresUserRepository` that queries the `users` table to find a user by their username. Returns `nil, nil` if no user is found.\n        - `GetByID(id int64)`: A public method on `postgresUserRepository` that queries the `users` table to find a user by their ID. Returns `nil, nil` if no user is found.\n- Notable Patterns or Logic: Repository pattern implementation, PostgreSQL interaction using `sqlx`, handling `sql.ErrNoRows` for \"not found\" scenarios.\n",
  "internal/usecase/application_service.go": "- File Path: `internal/usecase/application_service.go`\n- High-Level Purpose: This file implements the business logic for managing job applications, acting as the use case layer that orchestrates interactions between the domain and repository layers.\n- Definitions in the File:\n    - Structs:\n        - `applicationService`: An internal struct that holds dependencies for `ApplicationRepository`, `CompanyRepository`, and `RoleRepository`.\n    - Functions:\n        - `NewApplicationService(appRepo repository.ApplicationRepository, companyRepo repository.CompanyRepository, roleRepo repository.RoleRepository)`: An exported constructor function that creates and returns a new `ApplicationUseCase` instance.\n    - Methods:\n        - `CreateApplication(userID int64, companyName, roleTitle, status, dateAppliedStr string)`: A public method that handles the creation of a new job application. It first ensures the company and role exist (creating them if necessary), parses the application date, and then persists the application via the `appRepo`.\n        - `GetApplications(userID int64)`: A public method that retrieves all job applications for a specified user.\n        - `GetApplicationByID(id, userID int64)`: A public method that retrieves a specific job application by its ID for a specified user.\n        - `UpdateApplication(id, userID int64, companyName, roleTitle, status, dateAppliedStr string)`: A public method that handles updating an existing job application. It retrieves the application, ensures the company and role exist, updates the application's fields, and then persists the changes.\n        - `DeleteApplication(id, userID int64)`: A public method that handles the deletion of a job application by its ID for a specified user.\n- Notable Patterns or Logic: Use case/service layer, dependency injection, business logic orchestration, date string parsing, error handling.\n",
  "internal/usecase/interfaces.go": "- File Path: `internal/usecase/interfaces.go`\n- High-Level Purpose: This file defines the Go interfaces for the application's use case layer, establishing contracts for user and application-related business logic operations.\n- Definitions in the File:\n    - Interfaces:\n        - `UserUseCase`: Defines methods for user management, specifically `Register` (to create a new user) and `Login` (to authenticate a user and return a token).\n        - `ApplicationUseCase`: Defines methods for managing job applications, including `CreateApplication`, `GetApplications`, `GetApplicationByID`, `UpdateApplication`, and `DeleteApplication`.\n- Notable Patterns or Logic: Interface definition, use case layer contract, dependency inversion principle.\n",
  "internal/usecase/user_service.go": "- File Path: `internal/usecase/user_service.go`\n- High-Level Purpose: This file implements the business logic for user-related operations such as registration and login, acting as a use case layer.\n- Definitions in the File:\n    - Structs:\n        - `userService`: An internal struct that holds a `repository.UserRepository` dependency.\n    - Functions:\n        - `NewUserService(userRepo repository.UserRepository)`: An exported constructor function that creates and returns a new `UserUseCase` instance.\n    - Methods:\n        - `Register(username, email, password string)`: A public method on `userService` that handles user registration. It performs basic validation, checks for existing users by email and username, hashes the password, and then creates the user via the `UserRepository`.\n        - `Login(email, password string)`: A public method on `userService` that handles user login. It retrieves the user by email, checks the password hash, and if successful, generates and returns a JWT token.\n- Notable Patterns or Logic: Use case/service layer, dependency injection, business validation, password hashing/checking, JWT generation.\n",
  "migrations/000001_create_users_table.up.sql": "- File Path: `migrations/000001_create_users_table.up.sql`\n- High-Level Purpose: This SQL migration script creates the `users` table in the database, defining its schema and constraints.\n- Definitions in the File:\n    - SQL Table:\n        - `users`: A table with the following columns:\n            - `id`: `BIGSERIAL` (auto-incrementing primary key).\n            - `username`: `VARCHAR(50)`, unique and not null.\n            - `email`: `VARCHAR(255)`, unique and not null.\n            - `hashed_password`: `VARCHAR(255)`, not null.\n            - `bio`: `TEXT` (nullable).\n            - `avatar_url`: `VARCHAR(255)` (nullable).\n            - `settings`: `JSONB` (nullable, for flexible JSON data).\n            - `created_at`: `TIMESTAMPTZ`, not null, defaults to current timestamp.\n            - `updated_at`: `TIMESTAMPTZ`, not null, defaults to current timestamp.\n- Notable Patterns or Logic: Database migration script, SQL DDL (Data Definition Language).\n",
  "migrations/000002_create_application_tables.up.sql": "- File Path: `migrations/000002_create_application_tables.up.sql`\n- High-Level Purpose: This SQL migration script creates the database tables necessary for managing job applications, including `companies`, `roles`, `applications`, and `application_notes`, along with their respective columns, constraints, and indexes.\n- Definitions in the File:\n    - SQL Tables:\n        - `companies`: Stores company information with `id` (PK), `name`, `normalized_name` (unique), and `metadata` (JSONB).\n        - `roles`: Stores job role information with `id` (PK), `company_id` (FK to companies), `title`, and `metadata` (JSONB), with a unique constraint on `company_id` and `title`.\n        - `applications`: Stores job application details with `id` (PK), `user_id` (FK to users), `company_id` (FK to companies), `role_id` (FK to roles), `date_applied`, `status`, `metadata` (JSONB), `created_at`, and `updated_at`.\n        - `application_notes`: Stores notes related to applications with `id` (PK), `application_id` (FK to applications), `user_id` (FK to users), `content`, and `created_at`.\n    - SQL Indexes:\n        - `idx_applications_user_id`: Index on `applications.user_id`.\n        - `idx_applications_status`: Index on `applications.status`.\n        - `idx_application_notes_application_id`: Index on `application_notes.application_id`.\n- Notable Patterns or Logic: Database migration script, SQL DDL (Data Definition Language), foreign key constraints, unique constraints, indexing.\n",
  "pkg/util/hash.go": "- File Path: `pkg/util/hash.go`\n- High-Level Purpose: This file provides utility functions for securely hashing and comparing passwords using the bcrypt algorithm.\n- Definitions in the File:\n    - Functions:\n        - `HashPassword(password string)`: An exported function that takes a plain-text password and returns its bcrypt hash string and an error if one occurs.\n        - `CheckPasswordHash(password, hash string)`: An exported function that compares a plain-text password with a bcrypt hash, returning `true` if they match and `false` otherwise.\n- Notable Patterns or Logic: Utility package, password security (bcrypt).\n",
  "pkg/util/jwt.go": "- File Path: `pkg/util/jwt.go`\n- High-Level Purpose: This file provides utility functions for generating and validating JSON Web Tokens (JWTs) for user authentication.\n- Definitions in the File:\n    - Variables:\n        - `jwtSecret`: A module-level byte slice holding the secret key for signing JWTs (marked with a TODO to move to config).\n    - Structs:\n        - `Claims`: A struct that embeds `jwt.RegisteredClaims` and adds custom fields `UserID` (int64) and `Username` (string) for JWT payload.\n    - Functions:\n        - `GenerateJWT(userID int64, username string)`: An exported function that creates a new JWT with the given user ID and username, sets an expiration time (24 hours), and signs it with `jwtSecret`.\n        - `ValidateJWT(tokenStr string)`: An exported function that parses and validates a given JWT string using `jwtSecret`, returning the custom `Claims` if valid, or an error otherwise.\n- Notable Patterns or Logic: JWT generation and validation, security utility.\n"
}