{
  "Dockerfile": "- File Path: `Dockerfile`\n- High-Level Purpose: This Dockerfile defines a multi-stage build process to create a minimal Docker image for the Go backend application, including its static frontend assets.\n- Definitions in the File:\n    - Build Stages:\n        - `builder`: Uses `golang:1.21-alpine` to build the Go application binary.\n        - Final Stage: Uses `alpine:latest` as a base for the final, minimal image.\n    - Instructions:\n        - `FROM`: Specifies base images for stages.\n        - `WORKDIR`: Sets the working directory inside the container.\n        - `COPY`: Copies files from the host or previous stages into the container.\n        - `RUN`: Executes commands during the image build (e.g., `go mod download`, `go build`).\n        - `EXPOSE`: Informs Docker that the container listens on the specified network ports at runtime.\n        - `CMD`: Provides the default command to execute when the container starts.\n- Notable Patterns or Logic: Multi-stage Docker build for optimized image size, Go application compilation, static asset inclusion.\n",
  "client/index.html": "- File Path: `client/index.html`\n- High-Level Purpose: This is the main HTML file that serves as the entry point for the client-side single-page application (SPA). It sets up the basic document structure, imports necessary CSS and JavaScript libraries, and defines the root element for the application.\n- Definitions in the File:\n    - HTML Elements:\n        - `html`: Root element, sets `lang` and initial `light` theme class.\n        - `head`: Contains metadata, title, Tailwind CSS import and configuration, and Marked.js import.\n        - `body`: Sets global styling classes and contains the main `div#app` where JavaScript will render content.\n    - Script Imports:\n        - `https://cdn.tailwindcss.com`: Tailwind CSS framework.\n        - `https://cdn.jsdelivr.net/npm/marked/marked.min.js`: Markdown parsing library.\n        - `/js/main.js`: The main JavaScript entry point for the application (module type).\n- Notable Patterns or Logic: Single Page Application (SPA) entry point, client-side rendering, Tailwind CSS integration (with custom typography and forms plugins), external library imports.\n",
  "client/js/components/ApplicationCard.js": "- File Path: `client/js/components/ApplicationCard.js`\n- High-Level Purpose: This file defines a reusable JavaScript component that renders a single job application as a clickable card, suitable for display in a list.\n- Definitions in the File:\n    - Functions:\n        - `ApplicationCard(app)`: An exported function that takes an `app` object (representing a job application) and returns a dynamically created `\u003ca\u003e` (anchor) DOM element. This element is styled as a card and displays the application's role ID, company ID, status, and formatted application date.\n- Notable Patterns or Logic: UI component, DOM manipulation, client-side navigation (`data-link` attribute).\n",
  "client/js/components/BlogPostCard.js": "- File Path: `client/js/components/BlogPostCard.js`\n- High-Level Purpose: This file defines a reusable JavaScript component that renders a single blog post as a clickable card, suitable for display in a list.\n- Definitions in the File:\n    - Functions:\n        - `BlogPostCard(post)`: An exported function that takes a `post` object (representing a blog post) and returns a dynamically created `\u003ca\u003e` (anchor) DOM element. This element is styled as a card and displays the post's title, excerpt, author's username, and creation date.\n- Notable Patterns or Logic: UI component, DOM manipulation, client-side navigation (`data-link` attribute).\n",
  "client/js/components/CommentItem.js": "- File Path: `client/js/components/CommentItem.js`\n- High-Level Purpose: This file defines a reusable JavaScript component that renders a single comment, including its content, author, date, and options to like or reply, supporting nested replies.\n- Definitions in the File:\n    - Functions:\n        - `createCommentForm(postId, parentCommentId, onCommentAdded)`: An internal function that generates and returns an HTML form for submitting a reply to a comment. It handles form submission, calls `BlogService.addComment`, and invokes a callback on successful comment addition.\n        - `CommentItem(comment, postId, onCommentAdded)`: An exported function that takes a `comment` object, `postId`, and an `onCommentAdded` callback. It dynamically creates a `div` element representing the comment, displaying its content (HTML), author, and creation date. It includes buttons for liking and replying (if the user is logged in) and recursively renders any child comments. It attaches event listeners for the reply button to toggle the visibility of the reply form.\n- Notable Patterns or Logic: UI component, DOM manipulation, recursive rendering for nested comments, event handling, conditional rendering based on authentication status, asynchronous API calls.\n",
  "client/js/components/Navbar.js": "- File Path: `client/js/components/Navbar.js`\n- High-Level Purpose: This file defines a reusable JavaScript component for the application's navigation bar, providing links, theme switching functionality, and dynamic content based on the user's authentication status.\n- Definitions in the File:\n    - Functions:\n        - `Navbar()`: An exported function that returns a dynamically created `nav` DOM element.\n        - `render()`: An internal function that updates the `nav` element's `innerHTML` based on the current theme and authentication state. It displays \"Login\" and \"Register\" links if not logged in, or \"Profile\" (with username) and \"Logout\" if logged in. It also attaches event listeners for theme switching and logout.\n- Notable Patterns or Logic: UI component, DOM manipulation, state management integration (`themeState`, `authState`), event handling, conditional rendering, client-side navigation.\n",
  "client/js/main.js": "- File Path: `client/js/main.js`\n- High-Level Purpose: This is the main entry point for the client-side JavaScript application, responsible for initializing core functionalities like routing and theme management, and rendering the initial page layout.\n- Definitions in the File:\n    - Variables:\n        - `appContainer`: A module-level variable referencing the main `div` element with `id=\"app\"` in `index.html`.\n    - Functions:\n        - `renderLayout()`: An internal function that clears the `appContainer`, creates and appends the `Navbar` component, and creates a `main` element with `id=\"main-content\"` to serve as the router's content container.\n- Notable Patterns or Logic: Client-side application bootstrap, DOM manipulation, event listener for `DOMContentLoaded`, initialization of router and theme.\n",
  "client/js/router.js": "- File Path: `client/js/router.js`\n- High-Level Purpose: This file implements a client-side routing mechanism for the single-page application (SPA), mapping URL paths to specific view components and handling navigation events.\n- Definitions in the File:\n    - Variables:\n        - `mainContentContainer`: A module-level variable that will hold the DOM element where views are rendered.\n        - `routes`: An array of route objects, each containing a `path` (string) and a `view` component.\n    - Functions:\n        - `pathToRegex(path)`: An internal function that converts a route path string (e.g., `/applications/:id`) into a regular expression for matching.\n        - `getParams(match)`: An internal function that extracts path parameters (e.g., `id`) from a matched route.\n        - `navigate(path)`: An exported function that updates the browser's history and triggers `handleRoute` to render the new view.\n        - `handleRoute()`: An exported asynchronous function that determines the current route, extracts parameters, and calls the `render` method of the matched view component. It includes a fallback for 404 Not Found.\n        - `initializeRouter(container)`: An exported function that sets the main content container, adds event listeners for `popstate` (browser back/forward) and `click` events on elements with `data-link` attributes for client-side navigation, and performs an initial route handling.\n- Notable Patterns or Logic: Client-side routing, SPA architecture, HTML5 History API, regular expressions for path matching, event delegation.\n",
  "client/js/services/applicationService.js": "- File Path: `client/js/services/applicationService.js`\n- High-Level Purpose: This file provides a client-side service for interacting with the backend API for job applications. It encapsulates HTTP requests for CRUD operations (create, retrieve, update, delete) and includes logic for sending authenticated requests.\n- Definitions in the File:\n    - Constants:\n        - `API_BASE_URL`: A string constant defining the base URL for application API endpoints (`/api`).\n    - Functions:\n        - `handleResponse(response)`: An internal asynchronous function that processes an HTTP response. It parses JSON data, throws an error if the response is not OK, or returns `null` for `204 No Content`.\n        - `authorizedFetch(url, options)`: An internal asynchronous function that wraps `fetch` to automatically include the JWT token from `authState` in the `Authorization` header for authenticated requests.\n    - Variables:\n        - `ApplicationService`: An exported object containing methods for interacting with the application API.\n            - `getApplications(params)`: Public asynchronous method to fetch a paginated list of job applications.\n            - `getApplication(id)`: Public asynchronous method to fetch a single job application by ID.\n            - `createApplication(appData)`: Public asynchronous method to send a POST request to create a new job application (requires authentication).\n            - `updateApplication(id, appData)`: Public asynchronous method to send a PUT request to update an existing job application (requires authentication).\n            - `deleteApplication(id)`: Public asynchronous method to send a DELETE request to delete a job application (requires authentication).\n- Notable Patterns or Logic: Service layer, API client, asynchronous operations (`fetch`), JWT authentication (via `authorizedFetch`), centralized response handling.",
  "client/js/services/authService.js": "- File Path: `client/js/services/authService.js`\n- High-Level Purpose: This file provides a client-side service for interacting with the backend API for user authentication (login and registration), encapsulating HTTP requests for these operations.\n- Definitions in the File:\n    - Constants:\n        - `API_BASE_URL`: A string constant defining the base URL for authentication API endpoints (`/api`).\n    - Variables:\n        - `AuthService`: An exported object containing methods for interacting with the authentication API.\n            - `login(email, password)`: Public asynchronous method to send a POST request to `/api/auth/login` with user credentials.\n            - `register(username, email, password)`: Public asynchronous method to send a POST request to `/api/auth/register` with user registration data.\n- Notable Patterns or Logic: Service layer, API client, asynchronous operations (`fetch`), JSON request/response, centralized response handling.\n",
  "client/js/services/blogService.js": "- File Path: `client/js/services/blogService.js`\n- High-Level Purpose: This file provides a client-side service for interacting with the backend API for blog posts, comments, and likes. It encapsulates HTTP requests, handles responses, and includes logic for sending authenticated requests.\n- Definitions in the File:\n    - Constants:\n        - `API_BASE_URL`: A string constant defining the base URL for blog API endpoints (`/api`).\n    - Functions:\n        - `handleResponse(response)`: An internal asynchronous function that processes an HTTP response. It parses JSON data, throws an error if the response is not OK, or returns `null` for `204 No Content`.\n        - `authorizedFetch(url, options)`: An internal asynchronous function that wraps `fetch` to automatically include the JWT token from `authState` in the `Authorization` header for authenticated requests.\n    - Variables:\n        - `BlogService`: An exported object containing methods for interacting with the blog API.\n            - `getPublicPosts(params)`: Public asynchronous method to fetch a paginated list of public blog posts.\n            - `getPublicPost(username, slug)`: Public asynchronous method to fetch a single public blog post by username and slug.\n            - `createPost(postData)`: Public asynchronous method to send a POST request to create a new blog post (requires authentication).\n            - `getComments(postId)`: Public asynchronous method to fetch comments for a specific blog post.\n            - `addComment(postId, commentData)`: Public asynchronous method to send a POST request to add a comment to a blog post (requires authentication).\n            - `toggleLike(likeData)`: Public asynchronous method to send a POST request to like or unlike content (requires authentication).\n- Notable Patterns or Logic: Service layer, API client, asynchronous operations (`fetch`), JWT authentication (via `authorizedFetch`), centralized response handling.\n",
  "client/js/services/userService.js": "- File Path: `client/js/services/userService.js`\n- High-Level Purpose: This file provides a client-side service for interacting with the backend API to retrieve user profiles and manage follow/unfollow actions, encapsulating authenticated HTTP requests.\n- Definitions in the File:\n    - Constants:\n        - `API_BASE_URL`: A string constant defining the base URL for user API endpoints (`/api/users`).\n    - Variables:\n        - `UserService`: An exported object containing methods for interacting with the user API.\n            - `getProfile(username)`: Public asynchronous method to fetch a user's profile by username. It uses `authorizedFetch` to include a token if available.\n            - `follow(username)`: Public asynchronous method to send a POST request to follow a user.\n            - `unfollow(username)`: Public asynchronous method to send a DELETE request to unfollow a user.\n- Notable Patterns or Logic: Service layer, API client, asynchronous operations (`fetch`), JWT authentication (via `authorizedFetch`), centralized response handling.\n",
  "client/js/state/authState.js": "- File Path: `client/js/state/authState.js`\n- High-Level Purpose: This file manages the client-side authentication state, including the JWT token and current user object, persisting them to local storage, and providing a mechanism for other components to subscribe to state changes.\n- Definitions in the File:\n    - Variables:\n        - `token`: A module-level string variable storing the JWT token, initialized from local storage.\n        - `user`: A module-level object variable storing the current user's data, initialized from local storage.\n        - `subscribers`: A `Set` object used to store callback functions that need to be notified of state changes.\n    - Functions:\n        - `notify()`: An internal function that iterates through `subscribers` and calls each callback.\n        - `setToken(newToken, newUser)`: An exported function that updates the `token` and `user` state, persists them to local storage (or removes them if null), and then calls `notify()`.\n        - `getToken()`: An exported function that returns the current JWT `token`.\n        - `getUser()`: An exported function that returns the current `user` object.\n        - `isLoggedIn()`: An exported function that returns a boolean indicating whether a `token` is present.\n        - `logout()`: An exported function that clears the `token` and `user` by calling `setToken(null, null)`.\n        - `subscribe(callback)`: An exported function that adds a `callback` to the `subscribers` set and returns an unsubscribe function.\n- Notable Patterns or Logic: Simple state management, local storage persistence, observer pattern, authentication state.\n",
  "client/js/state/themeState.js": "- File Path: `client/js/state/themeState.js`\n- High-Level Purpose: This file manages the application's theme state (light or dark), including persistence to local storage and applying the theme to the document.\n- Definitions in the File:\n    - Variables:\n        - `currentTheme`: A module-level variable storing the current theme, initialized from local storage or defaulting to 'light'.\n    - Functions:\n        - `applyTheme(theme)`: An internal function that adds or removes the 'dark' class from the `document.documentElement` based on the provided theme.\n        - `getTheme()`: An exported function that returns the `currentTheme`.\n        - `toggleTheme()`: An exported function that switches `currentTheme` between 'light' and 'dark', updates local storage, applies the new theme, and returns the new theme.\n        - `initializeTheme()`: An exported function that applies the `currentTheme` when the application starts.\n- Notable Patterns or Logic: Simple state management, local storage persistence, DOM class manipulation.\n",
  "client/js/utils/markdownParser.js": "- File Path: `client/js/utils/markdownParser.js`\n- High-Level Purpose: This file provides a utility function to parse Markdown text into HTML using the `marked.js` library, intended for client-side rendering.\n- Definitions in the File:\n    - Functions:\n        - `parseMarkdown(markdownText)`: An exported function that takes a Markdown string and uses `window.marked.parse` to convert it into HTML. It includes basic configuration for GFM and line breaks. It also includes an error fallback if `marked.js` is not loaded.\n- Notable Patterns or Logic: Utility function, wrapper for an external JavaScript library (`marked.js`), Markdown to HTML conversion.\n",
  "client/js/views/DashboardView.js": "- File Path: `client/js/views/DashboardView.js`\n- High-Level Purpose: This file defines the content and rendering logic for the application's dashboard page view.\n- Definitions in the File:\n    - Variables:\n        - `DashboardView`: An exported object that represents the dashboard page view.\n            - `render(container)`: A method on `DashboardView` that takes a DOM `container` element and populates its `innerHTML` with the static HTML content for the dashboard.\n- Notable Patterns or Logic: View component, static content rendering.\n",
  "client/js/views/HomeView.js": "- File Path: `client/js/views/HomeView.js`\n- High-Level Purpose: This file defines the content and rendering logic for the application's home page view.\n- Definitions in the File:\n    - Variables:\n        - `HomeView`: An exported object that represents the home page view.\n            - `render(container)`: A method on `HomeView` that takes a DOM `container` element and populates its `innerHTML` with the static HTML content for the home page.\n- Notable Patterns or Logic: View component, static content rendering.\n",
  "client/js/views/applications/ApplicationDetailView.js": "- File Path: `client/js/views/applications/ApplicationDetailView.js`\n- High-Level Purpose: This file defines the client-side view component responsible for displaying the detailed information of a single job application.\n- Definitions in the File:\n    - Variables:\n        - `ApplicationDetailView`: An exported object representing the application detail view.\n            - `render(container, params)`: An asynchronous method on `ApplicationDetailView` that takes a DOM `container` element and `params` (containing the application ID). It populates the container with loading text, then fetches the application details using `ApplicationService.getApplication`. If successful, it renders the application's role ID, company ID, status, and formatted date applied, along with an \"Edit\" button and a placeholder for notes. It handles cases where the application is not found or an error occurs during fetching.\n- Notable Patterns or Logic: View component, asynchronous data fetching, dynamic content rendering, client-side navigation.\n",
  "client/js/views/applications/ApplicationFormView.js": "- File Path: `client/js/views/applications/ApplicationFormView.js`\n- High-Level Purpose: This file defines the client-side view component for creating a new job application or editing an existing one, providing an HTML form and handling its submission.\n- Definitions in the File:\n    - Variables:\n        - `ApplicationFormView`: An exported object representing the application form view.\n            - `render(container, params)`: An asynchronous method on `ApplicationFormView` that takes a DOM `container` element and `params` (which may contain an application ID for editing). It dynamically generates an HTML form for application details. If `params.id` is present, it fetches existing application data to pre-fill the form. It attaches an event listener to the form to handle submission, calling `ApplicationService.createApplication` or `updateApplication` and then navigating to the application's detail page or displaying an error message.\n- Notable Patterns or Logic: View component, form handling, asynchronous API calls, client-side navigation, conditional rendering (create vs. edit mode), basic error display.\n",
  "client/js/views/applications/ApplicationListView.js": "- File Path: `client/js/views/applications/ApplicationListView.js`\n- High-Level Purpose: This file defines the client-side view component for displaying a paginated list of the user's job applications. It includes functionality for searching applications by company or role, filtering by status, sorting, and provides a link to add new applications.\n- Definitions in the File:\n    - Variables:\n        - `ApplicationListView`: An exported object representing the application list view.\n            - `render(container)`: An asynchronous method on `ApplicationListView` that takes a DOM `container` element. It initializes a local `state` object for pagination, search, status filter, and sorting. It dynamically renders the page layout, including a title, an \"Add New Application\" button, search input, status filter dropdown, sort-by dropdown, and containers for the application cards and pagination controls. It fetches applications using `ApplicationService.getApplications`, renders them using `ApplicationCard`, and sets up pagination buttons. It attaches event listeners for search input changes, filter/sort dropdown changes, and pagination clicks to update the view.\n        - `state`: A local object within `render` that manages the current `page`, `limit`, `search` query, `status` filter, `sortBy` field, and `sortOrder` for applications.\n    - Functions:\n        - `updateView()`: An internal asynchronous function defined within `render` that handles fetching data, rendering the UI, and attaching event listeners based on the current `state`.\n- Notable Patterns or Logic: View component, asynchronous data fetching, dynamic DOM manipulation, pagination, search functionality, filtering, sorting, event handling, client-side navigation.\n",
  "client/js/views/auth/LoginView.js": "- File Path: `client/js/views/auth/LoginView.js`\n- High-Level Purpose: This file defines the client-side view component for user login, providing an HTML form and handling its submission to authenticate with the backend.\n- Definitions in the File:\n    - Variables:\n        - `LoginView`: An exported object representing the login view.\n            - `render(container)`: A method on `LoginView` that takes a DOM `container` element. It populates the container with the HTML login form (email, password fields, submit button). It attaches an event listener to the form to handle submission, calling `AuthService.login` with the entered credentials. On successful login, it uses `setToken` to store the JWT and user object in `authState` and navigates to `/dashboard`. It displays error messages for failed login attempts.\n- Notable Patterns or Logic: View component, form handling, asynchronous API calls, client-side navigation, error display, state management integration (`authState`).\n",
  "client/js/views/auth/RegisterView.js": "- File Path: `client/js/views/auth/RegisterView.js`\n- High-Level Purpose: This file defines the client-side view component for user registration, including the HTML form and the logic to handle form submission and interact with the authentication service.\n- Definitions in the File:\n    - Variables:\n        - `RegisterView`: An exported object representing the registration view.\n            - `render(container)`: A method on `RegisterView` that takes a DOM `container` element, populates its `innerHTML` with the registration form, and attaches an event listener to handle form submission. On submission, it calls `AuthService.register`, redirects to `/login` on success, or displays an error message.\n- Notable Patterns or Logic: View component, form handling, asynchronous API calls, client-side navigation, error display.\n",
  "client/js/views/blog/BlogListView.js": "- File Path: `client/js/views/blog/BlogListView.js`\n- High-Level Purpose: This file defines the client-side view component for displaying a paginated list of public blog posts. It includes functionality for searching posts by title, and provides a link for logged-in users to create new posts.\n- Definitions in the File:\n    - Variables:\n        - `BlogListView`: An exported object representing the blog list view.\n            - `render(container)`: An asynchronous method on `BlogListView` that takes a DOM `container` element. It initializes a local `state` object for pagination and search. It dynamically renders the page layout, including a title, a \"Create New Post\" button (if logged in), a search input, and containers for the blog post cards and pagination controls. It fetches public blog posts using `BlogService.getPublicPosts`, renders them using `BlogPostCard`, and sets up pagination buttons. It attaches event listeners for search input changes and pagination clicks to update the view.\n        - `state`: A local object within `render` that manages the current `page`, `limit`, and `search` query for blog posts.\n    - Functions:\n        - `updateView()`: An internal asynchronous function defined within `render` that handles fetching data, rendering the UI, and attaching event listeners based on the current `state`.\n- Notable Patterns or Logic: View component, asynchronous data fetching, dynamic DOM manipulation, pagination, search functionality, conditional rendering based on authentication status (`isLoggedIn`), event handling.\n",
  "client/js/views/blog/BlogPostDetailView.js": "- File Path: `client/js/views/blog/BlogPostDetailView.js`\n- High-Level Purpose: This file defines the client-side view component responsible for displaying the detailed content of a single blog post, including its title, author, content, and sections for comments and liking functionality.\n- Definitions in the File:\n    - Functions:\n        - `renderComments(comments, postId, onCommentAdded)`: An internal function that takes a list of comments, a post ID, and a callback, then renders them into a container using the `CommentItem` component.\n    - Variables:\n        - `BlogPostDetailView`: An exported object representing the blog post detail view.\n            - `render(container, params)`: An asynchronous method on `BlogPostDetailView` that takes a DOM `container` element and `params` (containing `username` and `slug`). It fetches the blog post and its comments using `BlogService`. It dynamically renders the post's title, author, date, and HTML content. It includes a \"Like Post\" button and a comments section with a form for new comments (if the user is logged in). It attaches event listeners for comment submission and like toggling, updating the UI accordingly. It handles loading states and \"post not found\" scenarios.\n- Notable Patterns or Logic: View component, asynchronous data fetching, dynamic content rendering, client-side navigation, form handling, event delegation for like buttons, conditional rendering based on authentication status, real-time UI updates for comments and likes.\n",
  "client/js/views/blog/BlogPostEditorView.js": "- File Path: `client/js/views/blog/BlogPostEditorView.js`\n- High-Level Purpose: This file defines the client-side view component for creating new blog posts, providing a Markdown editor with a live preview and handling post submission (as draft or public).\n- Definitions in the File:\n    - Variables:\n        - `autosaveTimeout`: A module-level variable used to manage the autosave timer.\n        - `BlogPostEditorView`: An exported object representing the blog post editor view.\n            - `render(container, params)`: An asynchronous method on `BlogPostEditorView` that takes a DOM `container` element and `params`. It populates the container with an HTML form for title, Markdown content, and a public checkbox. It sets up event listeners for live Markdown preview, a placeholder autosave mechanism, and form submission (for publishing or saving as draft). It calls `BlogService.createPost` and navigates on success.\n- Notable Patterns or Logic: View component, form handling, Markdown editor with live preview, client-side navigation, asynchronous API calls, basic autosave placeholder, conditional submission (public vs. draft).\n",
  "client/js/views/profile/ProfileView.js": "- File Path: `client/js/views/profile/ProfileView.js`\n- High-Level Purpose: This file defines the client-side view component for displaying a user's public profile, including their details, public blog posts, and options to follow/unfollow.\n- Definitions in the File:\n    - Variables:\n        - `ProfileView`: An exported object representing the profile view.\n            - `render(container, params)`: An asynchronous method on `ProfileView` that takes a DOM `container` element and `params` (containing the `username`). It fetches the user's profile data using `UserService.getProfile`. It dynamically renders the user's avatar, username, post count, follower/following counts, bio, and a list of their public blog posts using the `BlogPostCard` component. It conditionally displays a \"Follow\" or \"Unfollow\" button based on the viewer's login status and relationship with the profile owner, attaching event listeners to handle follow/unfollow actions via `UserService`. It handles loading states and displays error messages if the profile cannot be loaded.\n- Notable Patterns or Logic: View component, asynchronous data fetching, dynamic content rendering, conditional rendering (follow button, logged-in status), event handling for social actions, integration with `UserService` and `authState`.",
  "cmd/server/main.go": "- File Path: `cmd/server/main.go`\n- High-Level Purpose: This is the main entry point for the Go backend application, responsible for initializing the database, running migrations, setting up all repositories and use cases, configuring the HTTP router, and starting the web server.\n- Definitions in the File:\n    - Functions:\n        - `main()`: The primary entry point of the application. It loads environment variables, connects to the PostgreSQL database, runs database migrations, initializes all concrete repository implementations (PostgreSQL), then initializes all use case implementations with their respective repository dependencies. Finally, it creates and starts the Echo HTTP router.\n        - `runMigrations(databaseURL string)`: An internal function that uses `golang-migrate/migrate` to apply pending database migrations to the specified `databaseURL`. It logs success or failure, handling `migrate.ErrNoChange` gracefully.\n- Notable Patterns or Logic: Application bootstrap, dependency injection (manual), database connection management, environment variable loading, database migration execution, server startup.\n",
  "go.mod": "- File Path: `go.mod`\n- High-Level Purpose: This file defines the Go module for the `job-app-tracker` project and lists all its direct and indirect external dependencies.\n- Definitions in the File:\n    - Module: `job-app-tracker`\n    - Go Version: `1.21`\n    - Direct Dependencies:\n        - `github.com/golang-jwt/jwt/v5`: For JSON Web Token handling.\n        - `github.com/golang-migrate/migrate/v4`: For database migrations.\n        - `github.com/jackc/pgx/v5`: PostgreSQL driver.\n        - `github.com/jmoiron/sqlx`: SQL extensions for Go.\n        - `github.com/joho/godotenv`: For loading environment variables from `.env` files.\n        - `github.com/labstack/echo/v4`: Web framework.\n        - `golang.org/x/crypto`: Cryptographic utilities, including bcrypt.\n- Notable Patterns or Logic: Go module definition, dependency management.\n",
  "internal/domain/application.go": "- File Path: `internal/domain/application.go`\n- High-Level Purpose: This file defines the core data structures (models) for job applications, companies, roles, and associated notes within the application's domain.\n- Definitions in the File:\n    - Structs:\n        - `Company`: Represents a company with `ID`, `Name`, `NormalizedName`, and `Metadata` (raw JSON).\n        - `Role`: Represents a job role with `ID`, `CompanyID`, `Title`, and `Metadata` (raw JSON).\n        - `Application`: Represents a job application with `ID`, `UserID`, `CompanyID`, `RoleID`, `DateApplied`, `Status`, `Metadata` (raw JSON), and `CurrentNoteID` (nullable).\n        - `ApplicationNote`: Represents a note associated with an application, including `ID`, `ApplicationID`, `UserID`, `Timestamp`, and `Content`.\n- Notable Patterns or Logic: Domain model definition, use of `json.RawMessage` for flexible JSON storage, `sql.NullInt64` for nullable database fields.\n",
  "internal/domain/blog.go": "- File Path: `internal/domain/blog.go`\n- High-Level Purpose: This file defines the core data structures (models) for blog posts and their draft versions within the application's domain.\n- Definitions in the File:\n    - Structs:\n        - `BlogPost`: Represents a published blog post with fields like `ID`, `UserID`, `Title`, `Slug`, `ContentMD` (Markdown), `ContentHTML`, `Excerpt`, `IsPublic`, timestamps, SEO metadata, `Tags` (PostgreSQL array), and `Username` (for joining).\n        - `DraftVersion`: Represents a draft version of a blog post, including `ID`, `PostID` (nullable for new drafts), `UserID`, `ContentMD`, `ContentHTML`, `LastSavedAt`, and `IsPublishedVersion`.\n- Notable Patterns or Logic: Domain model definition, use of `sql.NullString` for nullable database fields, `pq.StringArray` for PostgreSQL array types, `db` and `json` struct tags for ORM and serialization.\n",
  "internal/domain/common.go": "- File Path: `internal/domain/common.go`\n- High-Level Purpose: This file defines common data structures used across the application for handling list parameters, pagination metadata, and structured paginated results for applications and blog posts.\n- Definitions in the File:\n    - Structs:\n        - `ListParams`: A struct holding parameters for filtering, sorting, and pagination, including `Page`, `Limit`, `SortBy`, `SortOrder`, `Search`, and `Filters` (a map).\n        - `Pagination`: A struct holding metadata about paginated results, including `TotalItems`, `TotalPages`, `CurrentPage`, and `PageSize`.\n        - `PaginatedApplications`: A container struct for a list of `Application` objects and their `Pagination` metadata.\n        - `PaginatedBlogPosts`: A container struct for a list of `BlogPost` objects and their `Pagination` metadata.\n- Notable Patterns or Logic: Domain model definition, DTOs (Data Transfer Objects) for pagination.\n",
  "internal/domain/social.go": "- File Path: `internal/domain/social.go`\n- High-Level Purpose: This file defines the core data structures (models) for social features like comments, likes, and follows within the application's domain.\n- Definitions in the File:\n    - Constants:\n        - `ContentTypePost`: A `ContentType` value indicating a blog post.\n        - `ContentTypeComment`: A `ContentType` value indicating a comment.\n    - Types:\n        - `ContentType`: A string type used as an enum to categorize content (e.g., \"post\", \"comment\").\n    - Structs:\n        - `Comment`: Represents a user comment with fields for `ID`, `PostID`, `UserID`, `ParentCommentID` (nullable for replies), `ContentMD` (Markdown), `ContentHTML`, `CreatedAt`, `UpdatedAt`, `DepthLevel`, `Username` (populated via JOIN), and `Replies` (for nested structure).\n        - `Like`: Represents a user's like on a piece of content, including `ID`, `UserID`, `ContentType`, `ContentID`, and `CreatedAt`.\n        - `Follow`: Represents a user following another user, with `ID`, `FollowerUserID`, `FolloweeUserID`, and `CreatedAt`.\n- Notable Patterns or Logic: Domain model definition, use of `sql.NullInt64` and `sql.NullString` for nullable database fields, `db` and `json` struct tags for ORM and serialization, enum-like type for `ContentType`.\n",
  "internal/domain/user.go": "- File Path: `internal/domain/user.go`\n- High-Level Purpose: This file defines the core data structure (model) for a user within the application's domain, representing how user information is stored and accessed.\n- Definitions in the File:\n    - Structs:\n        - `User`: Represents a user with the following fields:\n            - `ID`: `int64`, unique identifier.\n            - `Username`: `string`, user's chosen username.\n            - `Email`: `string`, user's email address.\n            - `HashedPassword`: `string`, the bcrypt hashed password.\n            - `Bio`: `sql.NullString`, optional user biography.\n            - `AvatarURL`: `sql.NullString`, optional URL to user's avatar image.\n            - `Settings`: `json.RawMessage`, flexible JSON storage for user settings.\n            - `CreatedAt`: `time.Time`, timestamp of user creation.\n            - `UpdatedAt`: `time.Time`, timestamp of last update.\n- Notable Patterns or Logic: Domain model definition, use of `sql.NullString` for nullable database fields, `json.RawMessage` for flexible JSON storage.\n",
  "internal/handler/application_handler.go": "- File Path: `internal/handler/application_handler.go`\n- High-Level Purpose: This file defines HTTP handlers for job application-related API endpoints, including creating, retrieving, updating, and deleting applications, using the Echo web framework and interacting with the application use case layer.\n- Definitions in the File:\n    - Structs:\n        - `ApplicationHandler`: An internal struct that holds a dependency on `usecase.ApplicationUseCase` to perform business logic.\n        - `createApplicationRequest`: An internal struct defining the expected JSON payload for creating or updating a job application, including `CompanyName`, `RoleTitle`, `Status`, and `DateApplied`.\n    - Functions:\n        - `NewApplicationHandler(uc usecase.ApplicationUseCase)`: An exported constructor function that creates and returns a new `ApplicationHandler` instance.\n    - Methods:\n        - `CreateApplication(c echo.Context)`: A public method on `ApplicationHandler` that handles POST requests to `/api/applications`. It binds the request body, calls `appUseCase.CreateApplication`, and returns the created application or an error.\n        - `GetApplications(c echo.Context)`: A public method on `ApplicationHandler` that handles GET requests to `/api/applications`. It parses query parameters for pagination, sorting, and filtering by status, calls `appUseCase.GetApplications`, and returns the paginated list of applications.\n        - `GetApplicationByID(c echo.Context)`: A public method on `ApplicationHandler` that handles GET requests to `/api/applications/:id`. It parses the application ID from path parameters, calls `appUseCase.GetApplicationByID`, and returns the application or a `404 Not Found` error.\n        - `UpdateApplication(c echo.Context)`: A public method on `ApplicationHandler` that handles PUT requests to `/api/applications/:id`. It parses the application ID, binds the request body, calls `appUseCase.UpdateApplication`, and returns the updated application or an error.\n        - `DeleteApplication(c echo.Context)`: A public method on `ApplicationHandler` that handles DELETE requests to `/api/applications/:id`. It parses the application ID, calls `appUseCase.DeleteApplication`, and returns `204 No Content` on success.\n- Notable Patterns or Logic: HTTP handler, request binding, calling use case layer, error handling, JSON response, query parameter parsing, path parameter parsing.\n",
  "internal/handler/auth_handler.go": "- File Path: `internal/handler/auth_handler.go`\n- High-Level Purpose: This file defines HTTP handlers for user authentication (registration and login) using the Echo web framework, interacting with the user use case layer.\n- Definitions in the File:\n    - Structs:\n        - `AuthHandler`: An internal struct that holds a dependency on `usecase.UserUseCase` to perform business logic.\n        - `RegisterRequest`: An internal struct defining the expected JSON payload for user registration, including `Username`, `Email`, and `Password`.\n        - `LoginRequest`: An internal struct defining the expected JSON payload for user login, including `Email` and `Password`.\n    - Functions:\n        - `NewAuthHandler(uc usecase.UserUseCase)`: An exported constructor function that creates and returns a new `AuthHandler` instance.\n    - Methods:\n        - `Register(c echo.Context)`: A public method on `AuthHandler` that handles POST requests to `/api/auth/register`. It binds the request body, calls `userUseCase.Register`, and returns the created user (with password sanitized) or an error (e.g., `409 Conflict` for existing user).\n        - `Login(c echo.Context)`: A public method on `AuthHandler` that handles POST requests to `/api/auth/login`. It binds the request body, calls `userUseCase.Login`, and returns a JWT token and the user object (with password sanitized) or an `401 Unauthorized` error for invalid credentials.\n- Notable Patterns or Logic: HTTP handler, request binding, calling use case layer, error handling, JSON response, password sanitization.\n",
  "internal/handler/blog_handler.go": "- File Path: `internal/handler/blog_handler.go`\n- High-Level Purpose: This file defines HTTP handlers for blog-related API endpoints, including creating and retrieving blog posts, adding comments, and toggling likes, using the Echo web framework and interacting with the blog use case layer.\n- Definitions in the File:\n    - Structs:\n        - `BlogHandler`: An internal struct that holds a dependency on `usecase.BlogUseCase` to perform business logic.\n        - `createPostRequest`: An internal struct defining the expected JSON payload for creating a blog post, including `Title`, `ContentMD` (Markdown), and `IsPublic` status.\n        - `addCommentRequest`: An internal struct defining the expected JSON payload for adding a comment, including `ContentMD` and an optional `ParentCommentID`.\n        - `toggleLikeRequest`: An internal struct defining the expected JSON payload for toggling a like, including `ContentType` and `ContentID`.\n    - Functions:\n        - `NewBlogHandler(uc usecase.BlogUseCase)`: An exported constructor function that creates and returns a new `BlogHandler` instance.\n    - Methods:\n        - `CreatePost(c echo.Context)`: A public method on `BlogHandler` that handles POST requests to create a new blog post. It binds the request body, converts Markdown to HTML, calls `blogUseCase.CreatePost`, and returns the created post or an error.\n        - `GetPublicPost(c echo.Context)`: A public method on `BlogHandler` that handles GET requests to retrieve a single public blog post by `username` and `slug`. It calls `blogUseCase.GetPublicPost` and returns the post or a `404 Not Found` error.\n        - `GetPublicPosts(c echo.Context)`: A public method on `BlogHandler` that handles GET requests to retrieve a paginated list of public blog posts. It parses query parameters for pagination and sorting, calls `blogUseCase.GetPublicPosts`, and returns the paginated results.\n        - `AddComment(c echo.Context)`: A public method on `BlogHandler` that handles POST requests to add a comment to a blog post. It extracts `postID` and `userID` from context/params, binds the request body, converts Markdown to HTML, calls `blogUseCase.AddComment`, and returns the created comment.\n        - `GetCommentsForPost(c echo.Context)`: A public method on `BlogHandler` that handles GET requests to retrieve all comments for a specific blog post. It parses `postID`, calls `blogUseCase.GetCommentsForPost`, and returns the list of comments.\n        - `ToggleLike(c echo.Context)`: A public method on `BlogHandler` that handles POST requests to like or unlike content (post or comment). It extracts `userID`, binds the request body, validates `ContentType`, calls `blogUseCase.ToggleLike`, and returns the new like status.\n- Notable Patterns or Logic: HTTP handler, request binding, calling use case layer, error handling, JSON response, Markdown to HTML conversion (server-side using `blackfriday/v2`), query parameter parsing.\n",
  "internal/handler/middleware.go": "- File Path: `internal/handler/middleware.go`\n- High-Level Purpose: This file defines an authentication middleware for the Echo web framework, responsible for validating JWT tokens from incoming requests and setting user information in the request context.\n- Definitions in the File:\n    - Functions:\n        - `AuthMiddleware(next echo.HandlerFunc)`: An exported middleware function that checks for an `Authorization` header, validates the Bearer token using `util.ValidateJWT`, and if valid, sets `userID` and `username` in the Echo context before calling the next handler. It returns `401 Unauthorized` for invalid or missing tokens.\n- Notable Patterns or Logic: Echo middleware, JWT validation, request context manipulation, authentication.\n",
  "internal/handler/router.go": "- File Path: `internal/handler/router.go`\n- High-Level Purpose: This file configures and initializes the Echo web framework router, defining all API endpoints, serving static frontend assets, applying middleware, and implementing a single-page application (SPA) fallback.\n- Definitions in the File:\n    - Functions:\n        - `NewRouter(userUC usecase.UserUseCase, appUC usecase.ApplicationUseCase, blogUC usecase.BlogUseCase)`: An exported function that creates and configures an `echo.Echo` instance with all routes and middleware.\n- Notable Patterns or Logic: Centralized routing, Echo middleware (Logger, Recover), static file serving, API grouping, dependency injection for handlers, authentication middleware (`AuthMiddleware`), SPA fallback for non-API routes.\n",
  "internal/handler/user_handler.go": "- File Path: `internal/handler/user_handler.go`\n- High-Level Purpose: This file defines HTTP handlers for user-related API endpoints, specifically for retrieving user profiles and managing follow relationships, interacting with the user use case layer.\n- Definitions in the File:\n    - Structs:\n        - `UserHandler`: An internal struct that holds a dependency on `usecase.UserUseCase` to perform business logic.\n    - Functions:\n        - `NewUserHandler(uc usecase.UserUseCase)`: An exported constructor function that creates and returns a new `UserHandler` instance.\n    - Methods:\n        - `GetProfile(c echo.Context)`: A public method on `UserHandler` that handles GET requests to `/api/users/:username/profile`. It extracts the `username` from path parameters, optionally extracts the `viewerID` from the JWT token in the context, calls `userUseCase.GetProfile`, and returns the `UserProfile` DTO or a `404 Not Found` error.\n        - `FollowUser(c echo.Context)`: A public method on `UserHandler` that handles POST requests to `/api/users/:username/follow`. It extracts the `followeeUsername` from path parameters and the `followerID` from the context, calls `userUseCase.FollowUser`, and returns `201 Created` on success.\n        - `UnfollowUser(c echo.Context)`: A public method on `UserHandler` that handles DELETE requests to `/api/users/:username/follow`. It extracts the `followeeUsername` from path parameters and the `followerID` from the context, calls `userUseCase.UnfollowUser`, and returns `204 No Content` on success.\n- Notable Patterns or Logic: HTTP handler, path parameter parsing, calling use case layer, error handling, JSON response, optional authentication.\n",
  "internal/repository/interfaces.go": "- File Path: `internal/repository/interfaces.go`\n- High-Level Purpose: This file defines the interfaces for various data repositories within the application, establishing contracts for data access operations related to users, companies, roles, applications, blog posts, comments, likes, and follows.\n- Definitions in the File:\n    - Interfaces:\n        - `UserRepository`: Defines methods for creating, retrieving by email, username, or ID.\n        - `CompanyRepository`: Defines a method for finding or creating a company.\n        - `RoleRepository`: Defines a method for finding or creating a role.\n        - `ApplicationRepository`: Defines methods for creating, retrieving (single and paginated), updating, and deleting applications.\n        - `ApplicationNoteRepository`: Defines methods for creating notes and retrieving all notes for an application.\n        - `BlogPostRepository`: Defines methods for creating posts, retrieving by slug/user, getting public posts (paginated and by user ID), and checking slug uniqueness.\n        - `CommentRepository`: Defines methods for creating comments, retrieving by ID, and getting all comments for a post.\n        - `LikeRepository`: Defines methods for creating, deleting, and retrieving likes.\n        - `FollowRepository`: Defines methods for creating, deleting, checking existence, and getting follower/following counts.\n- Notable Patterns or Logic: Repository pattern, interface-based programming.\n",
  "internal/repository/postgres/application_repository.go": "- File Path: `internal/repository/postgres/application_repository.go`\n- High-Level Purpose: This file provides PostgreSQL-specific implementations for the `CompanyRepository`, `RoleRepository`, `ApplicationRepository`, and `ApplicationNoteRepository` interfaces, handling database operations for job application-related data.\n- Definitions in the File:\n    - Structs:\n        - `postgresApplicationRepository`: An internal struct holding a `*sqlx.DB` instance for company-related database operations.\n        - `postgresRoleRepository`: An internal struct holding a `*sqlx.DB` instance for role-related database operations.\n        - `postgresAppRepo`: An internal struct holding a `*sqlx.DB` instance for application-related database operations.\n        - `postgresAppNoteRepository`: An internal struct holding a `*sqlx.DB` instance for application note-related database operations.\n    - Functions:\n        - `NewPostgresApplicationRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.CompanyRepository` instance.\n        - `NewPostgresRoleRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.RoleRepository` instance.\n        - `NewPostgresAppRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.ApplicationRepository` instance.\n        - `NewPostgresAppNoteRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.ApplicationNoteRepository` instance.\n    - Methods (on `postgresApplicationRepository`):\n        - `FindOrCreate(company *domain.Company)`: A public method that finds a company by its normalized name or creates a new one if it doesn't exist, populating the company's ID.\n    - Methods (on `postgresRoleRepository`):\n        - `FindOrCreate(role *domain.Role)`: A public method that finds a role by its company ID and title or creates a new one if it doesn't exist, populating the role's ID.\n    - Methods (on `postgresAppRepo`):\n        - `Create(app *domain.Application)`: A public method that inserts a new job application into the `applications` table and populates its ID and timestamps.\n        - `GetByID(id int64, userID int64)`: A public method that retrieves a single job application by its ID and associated user ID. Returns `nil, nil` if not found.\n        - `GetApplications(userID int64, params domain.ListParams)`: A public method that retrieves a paginated list of job applications for a user, supporting search, filtering by status, and sorting by date, company, role, or status.\n        - `Update(app *domain.Application)`: A public method that updates an existing job application in the database.\n        - `Delete(id int64, userID int64)`: A public method that deletes a job application by its ID and associated user ID.\n    - Methods (on `postgresAppNoteRepository`):\n        - `Create(note *domain.ApplicationNote)`: A public method that inserts a new application note into the `application_notes` table and populates its ID and timestamp.\n        - `GetAllForApplication(appID int64, userID int64)`: A public method that retrieves all notes for a specific application, ensuring they belong to the given user.\n- Notable Patterns or Logic: Repository pattern implementation, PostgreSQL interaction using `sqlx`, SQL `WITH` clause for `FindOrCreate` operations, pagination, filtering, sorting, SQL JOINs, error handling (`sql.ErrNoRows`).\n",
  "internal/repository/postgres/blog_repository.go": "- File Path: `internal/repository/postgres/blog_repository.go`\n- High-Level Purpose: This file provides a PostgreSQL-specific implementation of the `BlogPostRepository` interface, handling database operations for blog posts.\n- Definitions in the File:\n    - Structs:\n        - `postgresBlogPostRepository`: An internal struct that holds a `*sqlx.DB` instance for database interaction.\n    - Functions:\n        - `NewPostgresBlogPostRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.BlogPostRepository` instance backed by PostgreSQL.\n    - Methods:\n        - `Create(post *domain.BlogPost)`: A public method on `postgresBlogPostRepository` that inserts a new blog post into the `blog_posts` table and populates its `ID`, `CreatedAt`, and `UpdatedAt` fields. It handles PostgreSQL array types for `Tags`.\n        - `GetBySlugAndUser(slug string, username string)`: A public method on `postgresBlogPostRepository` that queries the `blog_posts` table to find a post by its slug and the author's username, joining with the `users` table. Returns `nil, nil` if no post is found.\n        - `GetPublicPosts(params domain.ListParams)`: A public method on `postgresBlogPostRepository` that retrieves a paginated list of public blog posts, supporting search by title and sorting.\n        - `GetPublicPostsByUserID(userID int64)`: A public method on `postgresBlogPostRepository` that retrieves all public blog posts for a specific user, ordered by creation date.\n        - `IsSlugTaken(slug string, userID int64)`: A public method on `postgresBlogPostRepository` that checks if a given slug is already in use by a post from a specific user.\n- Notable Patterns or Logic: Repository pattern implementation, PostgreSQL interaction using `sqlx`, pagination, filtering, sorting, SQL JOINs, `pq.Array` for handling PostgreSQL array types, error handling (`sql.ErrNoRows`).\n",
  "internal/repository/postgres/social_repository.go": "- File Path: `internal/repository/postgres/social_repository.go`\n- High-Level Purpose: This file provides PostgreSQL-specific implementations for the `CommentRepository`, `LikeRepository`, and `FollowRepository` interfaces, handling database operations for social features.\n- Definitions in the File:\n    - Structs:\n        - `postgresCommentRepository`: An internal struct holding a `*sqlx.DB` instance for comment-related database operations.\n        - `postgresLikeRepository`: An internal struct holding a `*sqlx.DB` instance for like-related database operations.\n        - `postgresFollowRepository`: An internal struct holding a `*sqlx.DB` instance for follow-related database operations.\n    - Functions:\n        - `NewPostgresCommentRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.CommentRepository` instance.\n        - `NewPostgresLikeRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.LikeRepository` instance.\n        - `NewPostgresFollowRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.FollowRepository` instance.\n    - Methods (on `postgresCommentRepository`):\n        - `Create(comment *domain.Comment)`: A public method that inserts a new comment into the `comments` table and populates its ID and timestamps.\n        - `GetByID(id int64)`: A public method that retrieves a comment by its ID. Returns `nil, nil` if not found.\n        - `GetForPost(postID int64)`: A public method that retrieves all comments for a given post, joining with the `users` table to include the author's username.\n    - Methods (on `postgresLikeRepository`):\n        - `Create(like *domain.Like)`: A public method that inserts a new like into the `likes` table and populates its ID and creation timestamp.\n        - `Delete(userID int64, contentType domain.ContentType, contentID int64)`: A public method that deletes a like based on the user, content type, and content ID.\n        - `Get(userID int64, contentType domain.ContentType, contentID int64)`: A public method that retrieves a like based on the user, content type, and content ID. Returns `nil, nil` if not found.\n    - Methods (on `postgresFollowRepository`):\n        - `Create(follow *domain.Follow)`: A public method that inserts a new follow relationship into the `follows` table and populates its ID and creation timestamp.\n        - `Delete(followerID, followeeID int64)`: A public method that deletes a follow relationship between two users.\n        - `Exists(followerID, followeeID int64)`: A public method that checks if a specific follow relationship exists.\n        - `GetFollowerCount(userID int64)`: A public method that returns the number of followers for a given user.\n        - `GetFollowingCount(userID int64)`: A public method that returns the number of users a given user is following.\n- Notable Patterns or Logic: Repository pattern implementation, PostgreSQL interaction using `sqlx`, handling `sql.ErrNoRows`, SQL JOINs, aggregate functions (COUNT).\n",
  "internal/repository/postgres/user_repository.go": "- File Path: `internal/repository/postgres/user_repository.go`\n- High-Level Purpose: This file provides a PostgreSQL-specific implementation of the `UserRepository` interface, handling database operations for user data.\n- Definitions in the File:\n    - Structs:\n        - `postgresUserRepository`: An internal struct that holds a `*sqlx.DB` instance for database interaction.\n    - Functions:\n        - `NewPostgresUserRepository(db *sqlx.DB)`: An exported constructor function that returns a new `repository.UserRepository` instance backed by PostgreSQL.\n    - Methods:\n        - `Create(user *domain.User)`: A public method on `postgresUserRepository` that inserts a new user into the `users` table and populates the user's `ID`, `CreatedAt`, and `UpdatedAt` fields.\n        - `GetByEmail(email string)`: A public method on `postgresUserRepository` that queries the `users` table to find a user by their email. Returns `nil, nil` if no user is found (not an error).\n        - `GetByUsername(username string)`: A public method on `postgresUserRepository` that queries the `users` table to find a user by their username. Returns `nil, nil` if no user is found.\n        - `GetByID(id int64)`: A public method on `postgresUserRepository` that queries the `users` table to find a user by their ID. Returns `nil, nil` if no user is found.\n- Notable Patterns or Logic: Repository pattern implementation, PostgreSQL interaction using `sqlx`, handling `sql.ErrNoRows` for \"not found\" scenarios.\n",
  "internal/usecase/application_service.go": "- File Path: `internal/usecase/application_service.go`\n- High-Level Purpose: This file implements the business logic for managing job applications, including creating, retrieving, updating, and deleting applications, and handling associated companies and roles. It acts as the use case layer, orchestrating interactions between the application, company, and role repositories.\n- Definitions in the File:\n    - Structs:\n        - `applicationService`: An internal struct that holds dependencies on `repository.ApplicationRepository`, `repository.CompanyRepository`, and `repository.RoleRepository`.\n    - Functions:\n        - `NewApplicationService(appRepo repository.ApplicationRepository, companyRepo repository.CompanyRepository, roleRepo repository.RoleRepository)`: An exported constructor function that creates and returns a new `ApplicationUseCase` instance.\n    - Methods:\n        - `CreateApplication(userID int64, companyName, roleTitle, status, dateAppliedStr string)`: A public method on `applicationService` that handles the creation of a new job application. It finds or creates the associated company and role, parses the application date, and then persists the application via `appRepo`.\n        - `GetApplications(userID int64, params domain.ListParams)`: A public method on `applicationService` that retrieves a paginated list of job applications for a specific user, applying filtering and sorting parameters.\n        - `GetApplicationByID(id, userID int64)`: A public method on `applicationService` that retrieves a single job application by its ID and the user ID.\n        - `UpdateApplication(id, userID int64, companyName, roleTitle, status, dateAppliedStr string)`: A public method on `applicationService` that handles updating an existing job application. It retrieves the application, finds or creates the updated company and role, parses the new date, and then updates the application via `appRepo`.\n        - `DeleteApplication(id, userID int64)`: A public method on `applicationService` that handles deleting a job application by its ID and the user ID.\n- Notable Patterns or Logic: Use case/service layer, dependency injection, business logic (find-or-create company/role, date parsing), error wrapping.\n",
  "internal/usecase/blog_service.go": "- File Path: `internal/usecase/blog_service.go`\n- High-Level Purpose: This file implements the business logic for blog-related operations, including creating and retrieving posts, managing comments (with depth limits), and toggling likes. It acts as the use case layer, orchestrating interactions between the blog, comment, and like repositories.\n- Definitions in the File:\n    - Constants:\n        - `MaxCommentDepth`: An integer constant defining the maximum nesting level for comments (set to 5).\n    - Structs:\n        - `blogService`: An internal struct that holds dependencies on `repository.BlogPostRepository`, `repository.CommentRepository`, and `repository.LikeRepository`.\n    - Functions:\n        - `NewBlogService(blogRepo repository.BlogPostRepository, commentRepo repository.CommentRepository, likeRepo repository.LikeRepository)`: An exported constructor function that creates and returns a new `BlogUseCase` instance.\n    - Methods:\n        - `CreatePost(userID int64, title, contentMd, contentHtml string, isPublic bool)`: A public method on `blogService` that handles creating a new blog post. It generates a unique slug, creates an excerpt, and persists the post via `blogRepo`. It includes logic to ensure slug uniqueness by appending a suffix if necessary.\n        - `GetPublicPost(username, slug string)`: A public method on `blogService` that retrieves a public blog post by its author's username and post slug. It ensures the retrieved post is actually public.\n        - `GetPublicPosts(params domain.ListParams)`: A public method on `blogService` that retrieves a paginated list of public blog posts.\n        - `AddComment(postID, userID int64, parentCommentID *int64, contentMd, contentHtml string)`: A public method on `blogService` that handles adding a new comment. It checks for a parent comment, enforces `MaxCommentDepth`, and persists the comment via `commentRepo`.\n        - `GetCommentsForPost(postID int64)`: A public method on `blogService` that retrieves all comments for a given post and reconstructs them into a nested (tree-like) structure based on `ParentCommentID`.\n        - `ToggleLike(userID int64, contentType domain.ContentType, contentID int64)`: A public method on `blogService` that handles liking or unliking a piece of content (post or comment). It checks for an existing like and either creates or deletes the like via `likeRepo`.\n- Notable Patterns or Logic: Use case/service layer, dependency injection, business validation (slug uniqueness, comment depth), error wrapping, comment tree reconstruction.\n",
  "internal/usecase/interfaces.go": "- File Path: `internal/usecase/interfaces.go`\n- High-Level Purpose: This file defines the interfaces for the application's core business logic (use cases) related to users, job applications, and blogging, establishing contracts for their implementations. It also defines a Data Transfer Object (DTO) for user profiles.\n- Definitions in the File:\n    - Interfaces:\n        - `UserUseCase`: Defines methods for user registration, login, profile retrieval, and follow/unfollow actions.\n        - `ApplicationUseCase`: Defines methods for creating, retrieving (single and paginated), updating, and deleting job applications.\n        - `BlogUseCase`: Defines methods for creating blog posts, retrieving public posts (single and paginated), adding comments, getting comments for a post, and toggling likes.\n    - Structs:\n        - `UserProfile`: A DTO used to represent a user's profile, including their `User` object, `Posts`, `IsFollowing` status, `FollowerCount`, and `FollowingCount`.\n- Notable Patterns or Logic: Interface-based programming, DTO (Data Transfer Object).\n",
  "internal/usecase/user_service.go": "- File Path: `internal/usecase/user_service.go`\n- High-Level Purpose: This file implements the business logic for user management, including registration, login, profile retrieval, and follow/unfollow actions, acting as the use case layer that orchestrates interactions between the domain and repository layers.\n- Definitions in the File:\n    - Structs:\n        - `userService`: An internal struct that holds dependencies for `repository.UserRepository`, `repository.BlogPostRepository`, and `repository.FollowRepository`.\n    - Functions:\n        - `NewUserService(userRepo repository.UserRepository, blogRepo repository.BlogPostRepository, followRepo repository.FollowRepository)`: An exported constructor function that creates and returns a new `UserUseCase` instance.\n    - Methods:\n        - `Register(username, email, password string)`: A public method on `userService` that handles user registration. It performs basic validation, checks for existing users by email and username, hashes the password using `util.HashPassword`, and persists the new user via `userRepo`.\n        - `Login(email, password string)`: A public method on `userService` that handles user login. It retrieves the user by email, verifies the password hash using `util.CheckPasswordHash`, generates a JWT using `util.GenerateJWT`, and returns the user and the token.\n        - `GetProfile(username string, viewerID int64)`: A public method on `userService` that retrieves a user's profile. It fetches user details, their public blog posts, follower/following counts, and determines if the `viewerID` is following the user. It sanitizes the user's password before returning a `UserProfile` DTO.\n        - `FollowUser(followerID int64, followeeUsername string)`: A public method on `userService` that handles a user following another. It finds the target user, prevents self-following, checks for existing follow relationships, and creates a new one via `followRepo`.\n        - `UnfollowUser(followerID int64, followeeUsername string)`: A public method on `userService` that handles a user unfollowing another. It finds the target user and deletes the follow relationship via `followRepo`.\n- Notable Patterns or Logic: Use case/service layer, dependency injection, business validation, password hashing, JWT generation, error wrapping, DTO (UserProfile).\n",
  "migrations/000001_create_users_table.up.sql": "- File Path: `migrations/000001_create_users_table.up.sql`\n- High-Level Purpose: This SQL migration script creates the `users` table in the database, defining its schema and constraints.\n- Definitions in the File:\n    - SQL Table:\n        - `users`: A table with the following columns:\n            - `id`: `BIGSERIAL` (auto-incrementing primary key).\n            - `username`: `VARCHAR(50)`, unique and not null.\n            - `email`: `VARCHAR(255)`, unique and not null.\n            - `hashed_password`: `VARCHAR(255)`, not null.\n            - `bio`: `TEXT` (nullable).\n            - `avatar_url`: `VARCHAR(255)` (nullable).\n            - `settings`: `JSONB` (nullable, for flexible JSON data).\n            - `created_at`: `TIMESTAMPTZ`, not null, defaults to current timestamp.\n            - `updated_at`: `TIMESTAMPTZ`, not null, defaults to current timestamp.\n- Notable Patterns or Logic: Database migration script, SQL DDL (Data Definition Language).\n",
  "migrations/000002_create_application_tables.up.sql": "- File Path: `migrations/000002_create_application_tables.up.sql`\n- High-Level Purpose: This SQL migration script creates the database tables necessary for managing job applications, including `companies`, `roles`, `applications`, and `application_notes`, along with their respective columns, constraints, and indexes.\n- Definitions in the File:\n    - SQL Tables:\n        - `companies`: Stores company information with `id` (PK), `name`, `normalized_name` (unique), and `metadata` (JSONB).\n        - `roles`: Stores job role information with `id` (PK), `company_id` (FK to companies), `title`, and `metadata` (JSONB), with a unique constraint on `company_id` and `title`.\n        - `applications`: Stores job application details with `id` (PK), `user_id` (FK to users), `company_id` (FK to companies), `role_id` (FK to roles), `date_applied`, `status`, `metadata` (JSONB), `created_at`, and `updated_at`.\n        - `application_notes`: Stores notes related to applications with `id` (PK), `application_id` (FK to applications), `user_id` (FK to users), `content`, and `created_at`.\n    - SQL Indexes:\n        - `idx_applications_user_id`: Index on `applications.user_id`.\n        - `idx_applications_status`: Index on `applications.status`.\n        - `idx_application_notes_application_id`: Index on `application_notes.application_id`.\n- Notable Patterns or Logic: Database migration script, SQL DDL (Data Definition Language), foreign key constraints, unique constraints, indexing.\n",
  "migrations/000003_create_blog_tables.up.sql": "- File Path: `migrations/000003_create_blog_tables.up.sql`\n- High-Level Purpose: This SQL migration script creates the database table for `blog_posts`, defining its schema, constraints, and indexes.\n- Definitions in the File:\n    - SQL Tables:\n        - `blog_posts`: A table with the following columns:\n            - `id`: `BIGSERIAL` (auto-incrementing primary key).\n            - `user_id`: `BIGINT` (foreign key to `users` table, cascades on delete).\n            - `title`: `VARCHAR(255)`, not null.\n            - `slug`: `VARCHAR(255)`, not null.\n            - `content_md`: `TEXT`, not null (Markdown content).\n            - `content_html`: `TEXT`, not null (HTML content, assumed sanitized).\n            - `excerpt`: `TEXT` (nullable, short summary).\n            - `is_public`: `BOOLEAN`, not null, defaults to `FALSE` (draft status).\n            - `seo_meta_title`: `VARCHAR(255)` (nullable).\n            - `seo_meta_description`: `VARCHAR(255)` (nullable).\n            - `tags`: `TEXT[]` (PostgreSQL array type, nullable).\n            - `created_at`: `TIMESTAMPTZ`, not null, defaults to current timestamp.\n            - `updated_at`: `TIMESTAMPTZ`, not null, defaults to current timestamp.\n            - `UNIQUE(user_id, slug)`: Ensures a user cannot have two posts with the same slug.\n    - SQL Indexes:\n        - `idx_blog_posts_user_id`: Index on `blog_posts.user_id` for efficient lookup by user.\n        - `idx_blog_posts_slug`: Index on `blog_posts.slug` for efficient lookup by slug.\n        - `idx_blog_posts_is_public`: Index on `blog_posts.is_public` for efficient filtering of public posts.\n- Notable Patterns or Logic: Database migration script, SQL DDL (Data Definition Language), foreign key constraints, unique constraints, indexing for performance.",
  "migrations/000004_create_social_tables.up.sql": "- File Path: `migrations/000004_create_social_tables.up.sql`\n- High-Level Purpose: This SQL migration script creates the database tables for social features: `comments`, `likes`, and `follows`, defining their schemas, constraints, and indexes.\n- Definitions in the File:\n    - SQL Types:\n        - `content_type`: An ENUM type with possible values `'post'` and `'comment'`, used to categorize content for likes.\n    - SQL Tables:\n        - `comments`: A table for user comments with `id` (BIGSERIAL PK), `post_id` (BIGINT FK to `blog_posts`, cascades on delete), `user_id` (BIGINT FK to `users`, cascades on delete), `parent_comment_id` (BIGINT FK to `comments` for threaded replies, cascades on delete), `content_md` (TEXT, not null), `content_html` (TEXT, not null), `depth_level` (INT, not null, default 0), `created_at` (TIMESTAMPTZ, not null, default NOW()), and `updated_at` (TIMESTAMPTZ, not null, default NOW()).\n        - `likes`: A table for user likes with `id` (BIGSERIAL PK), `user_id` (BIGINT FK to `users`, cascades on delete), `content_type` (using the `content_type` ENUM, not null), `content_id` (BIGINT, not null), and `created_at` (TIMESTAMPTZ, not null, default NOW()). It has a unique constraint on `user_id`, `content_type`, and `content_id`.\n        - `follows`: A table for user follow relationships with `id` (BIGSERIAL PK), `follower_user_id` (BIGINT FK to `users`, cascades on delete), `followee_user_id` (BIGINT FK to `users`, cascades on delete), and `created_at` (TIMESTAMPTZ, not null, default NOW()). It has a unique constraint on `follower_user_id` and `followee_user_id`.\n    - SQL Indexes:\n        - `idx_comments_post_id`: Index on `comments.post_id` for efficient lookup of comments by post.\n        - `idx_comments_parent_comment_id`: Index on `comments.parent_comment_id` for efficient lookup of replies.\n        - `idx_likes_content`: Index on `likes.content_type` and `likes.content_id` for efficient lookup of likes by content.\n- Notable Patterns or Logic: Database migration script, SQL DDL (Data Definition Language), ENUM type definition, foreign key constraints, unique constraints, indexing for performance, cascading deletes.",
  "pkg/util/hash.go": "- File Path: `pkg/util/hash.go`\n- High-Level Purpose: This file provides utility functions for securely hashing and comparing passwords using the bcrypt algorithm.\n- Definitions in the File:\n    - Functions:\n        - `HashPassword(password string)`: An exported function that takes a plain-text password and returns its bcrypt hash string and an error if one occurs.\n        - `CheckPasswordHash(password, hash string)`: An exported function that compares a plain-text password with a bcrypt hash, returning `true` if they match and `false` otherwise.\n- Notable Patterns or Logic: Utility package, password security (bcrypt).\n",
  "pkg/util/jwt.go": "- File Path: `pkg/util/jwt.go`\n- High-Level Purpose: This file provides utility functions for generating and validating JSON Web Tokens (JWTs) for user authentication.\n- Definitions in the File:\n    - Variables:\n        - `jwtSecret`: A module-level byte slice holding the secret key for signing JWTs (marked with a TODO to move to config).\n    - Structs:\n        - `Claims`: A struct that embeds `jwt.RegisteredClaims` and adds custom fields `UserID` (int64) and `Username` (string) for JWT payload.\n    - Functions:\n        - `GenerateJWT(userID int64, username string)`: An exported function that creates a new JWT with the given user ID and username, sets an expiration time (24 hours), and signs it with `jwtSecret`.\n        - `ValidateJWT(tokenStr string)`: An exported function that parses and validates a given JWT string using `jwtSecret`, returning the custom `Claims` if valid, or an error otherwise.\n- Notable Patterns or Logic: JWT generation and validation, security utility.\n",
  "pkg/util/slugify.go": "- File Path: `pkg/util/slugify.go`\n- High-Level Purpose: This file provides a utility function to convert a given string into a URL-friendly slug.\n- Definitions in the File:\n    - Variables:\n        - `nonAlphaNumRegex`: A module-level regular expression to match non-alphanumeric characters.\n        - `dashRegex`: A module-level regular expression to match multiple consecutive hyphens.\n    - Functions:\n        - `Slugify(s string)`: An exported function that takes a string, converts it to lowercase, replaces non-alphanumeric characters with hyphens, collapses multiple hyphens, and trims leading/trailing hyphens to produce a clean slug.\n- Notable Patterns or Logic: Utility package, string manipulation, regular expressions for text processing.\n"
}