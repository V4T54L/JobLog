{
  "Dockerfile": "# Stage 1: Build the Go application\nFROM golang:1.21-alpine AS builder\n\nWORKDIR /app\n\n# Copy go.mod and go.sum to download dependencies\nCOPY go.mod go.sum ./\nRUN go mod download\n\n# Copy the rest of the application source code\nCOPY . .\n\n# Build the application\n# -ldflags=\"-w -s\" strips debug information, reducing binary size\nRUN CGO_ENABLED=0 GOOS=linux go build -ldflags=\"-w -s\" -o /job-app-tracker ./cmd/server\n\n# Stage 2: Create the final, minimal image\nFROM alpine:latest\n\nWORKDIR /app\n\n# Copy the static frontend assets\nCOPY --from=builder /app/client ./client\n\n# Copy the built binary from the builder stage\nCOPY --from=builder /job-app-tracker .\n\n# Expose the port the application will run on\nEXPOSE 8080\n\n# Command to run the executable\nCMD [\"./job-app-tracker\"]\n",
  "client/index.html": "\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n    \u003cmeta charset=\"UTF-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003ctitle\u003eJob App Tracker\u003c/title\u003e\n    \u003c!-- Tailwind CSS CDN --\u003e\n    \u003cscript src=\"https://cdn.tailwindcss.com\"\u003e\u003c/script\u003e\n    \u003cscript\u003e\n        // Basic Tailwind dark mode config\n        tailwind.config = {\n            darkMode: 'class',\n        }\n    \u003c/script\u003e\n\u003c/head\u003e\n\u003cbody class=\"bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300\"\u003e\n    \u003cdiv id=\"app\" class=\"min-h-screen flex flex-col\"\u003e\n        \u003c!-- App content will be rendered here by JavaScript --\u003e\n    \u003c/div\u003e\n\n    \u003cscript type=\"module\" src=\"/js/main.js\"\u003e\u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n",
  "client/js/components/ApplicationCard.js": "export const ApplicationCard = (app) =\u003e {\n    const card = document.createElement('a');\n    card.href = `/applications/${app.ID}`;\n    card.setAttribute('data-link', '');\n    card.className = 'block bg-white dark:bg-gray-800 p-4 rounded-lg shadow hover:shadow-md transition-shadow duration-200';\n\n    const date = new Date(app.DateApplied).toLocaleDateString();\n\n    card.innerHTML = `\n        \u003cdiv class=\"flex justify-between items-start\"\u003e\n            \u003cdiv\u003e\n                \u003ch3 class=\"text-lg font-bold text-blue-600 dark:text-blue-400\"\u003e${app.RoleID}\u003c/h3\u003e\n                \u003cp class=\"text-gray-600 dark:text-gray-400\"\u003e${app.CompanyID}\u003c/p\u003e\n            \u003c/div\u003e\n            \u003cspan class=\"bg-blue-100 text-blue-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300\"\u003e${app.Status}\u003c/span\u003e\n        \u003c/div\u003e\n        \u003cp class=\"text-sm text-gray-500 dark:text-gray-400 mt-2\"\u003eApplied on: ${date}\u003c/p\u003e\n    `;\n    // TODO: Fetch and display actual company/role names instead of IDs\n    return card;\n};\n",
  "client/js/components/Navbar.js": "import { getTheme, toggleTheme } from '../state/themeState.js';\nimport { isLoggedIn, logout, subscribe } from '../state/authState.js';\nimport { navigate } from '../router.js';\n\nexport const Navbar = () =\u003e {\n    const nav = document.createElement('nav');\n    nav.className = 'bg-white dark:bg-gray-800 shadow p-4 flex justify-between items-center';\n\n    const render = () =\u003e {\n        const currentTheme = getTheme();\n        const loggedIn = isLoggedIn();\n\n        nav.innerHTML = `\n            \u003ca href=\"/\" data-link class=\"text-xl font-bold text-gray-800 dark:text-white\"\u003eJob Tracker\u003c/a\u003e\n            \u003cdiv class=\"flex items-center space-x-4\"\u003e\n                ${loggedIn ? `\n                    \u003ca href=\"/dashboard\" data-link class=\"text-gray-600 dark:text-gray-300 hover:text-blue-500\"\u003eDashboard\u003c/a\u003e\n                    \u003ca href=\"/applications\" data-link class=\"text-gray-600 dark:text-gray-300 hover:text-blue-500\"\u003eApplications\u003c/a\u003e\n                    \u003ca href=\"/blog\" data-link class=\"text-gray-600 dark:text-gray-300 hover:text-blue-500\"\u003eBlog\u003c/a\u003e\n                    \u003cbutton id=\"logout-btn\" class=\"text-gray-600 dark:text-gray-300 hover:text-blue-500\"\u003eLogout\u003c/button\u003e\n                ` : `\n                    \u003ca href=\"/login\" data-link class=\"text-gray-600 dark:text-gray-300 hover:text-blue-500\"\u003eLogin\u003c/a\u003e\n                    \u003ca href=\"/register\" data-link class=\"text-gray-600 dark:text-gray-300 hover:text-blue-500\"\u003eRegister\u003c/a\u003e\n                `}\n                \u003cbutton id=\"theme-switcher\" class=\"p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500\"\u003e\n                    \u003cspan class=\"theme-icon\"\u003e${currentTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô'}\u003c/span\u003e\n                \u003c/button\u003e\n            \u003c/div\u003e\n        `;\n\n        nav.querySelector('#theme-switcher').addEventListener('click', () =\u003e {\n            toggleTheme();\n            render(); // Re-render to update icon\n        });\n\n        if (loggedIn) {\n            nav.querySelector('#logout-btn').addEventListener('click', () =\u003e {\n                logout();\n                navigate('/login');\n            });\n        }\n    };\n\n    subscribe(render); // Re-render when auth state changes\n    render(); // Initial render\n    return nav;\n};",
  "client/js/main.js": "import { initializeRouter, handleRoute } from './router.js';\nimport { initializeTheme } from './state/themeState.js';\nimport { Navbar } from './components/Navbar.js';\n\nconst appContainer = document.getElementById('app');\n\nfunction renderLayout() {\n    appContainer.innerHTML = ''; // Clear previous content\n    const navbar = Navbar();\n    const mainContent = document.createElement('main');\n    mainContent.id = 'main-content';\n    mainContent.className = 'flex-grow container mx-auto p-4';\n\n    appContainer.appendChild(navbar);\n    appContainer.appendChild(mainContent);\n    return mainContent;\n}\n\ndocument.addEventListener('DOMContentLoaded', () =\u003e {\n    initializeTheme();\n    const mainContentContainer = renderLayout();\n    initializeRouter(mainContentContainer);\n    handleRoute();\n});",
  "client/js/router.js": "import { HomeView } from './views/HomeView.js';\nimport { DashboardView } from './views/DashboardView.js';\nimport { LoginView } from './views/auth/LoginView.js';\nimport { RegisterView } from './views/auth/RegisterView.js';\nimport { ApplicationListView } from './views/applications/ApplicationListView.js';\nimport { ApplicationDetailView } from './views/applications/ApplicationDetailView.js';\nimport { ApplicationFormView } from './views/applications/ApplicationFormView.js';\n\nlet mainContentContainer;\n\nconst routes = [\n    { path: '/', view: HomeView },\n    { path: '/dashboard', view: DashboardView },\n    { path: '/login', view: LoginView },\n    { path: '/register', view: RegisterView },\n    { path: '/applications', view: ApplicationListView },\n    { path: '/applications/new', view: ApplicationFormView },\n    { path: '/applications/:id', view: ApplicationDetailView },\n    { path: '/applications/:id/edit', view: ApplicationFormView },\n];\n\nconst pathToRegex = path =\u003e new RegExp(\"^\" + path.replace(/\\//g, \"\\\\/\").replace(/:\\w+/g, \"([^\\\\/]+)\") + \"$\");\n\nconst getParams = match =\u003e {\n    const values = match.result.slice(1);\n    const keys = Array.from(match.route.path.matchAll(/:(\\w+)/g)).map(result =\u003e result[1]);\n    return Object.fromEntries(keys.map((key, i) =\u003e [key, values[i]]));\n};\n\nexport const navigate = (path) =\u003e {\n    history.pushState(null, null, path);\n    handleRoute();\n};\n\nexport const handleRoute = async () =\u003e {\n    const potentialMatches = routes.map(route =\u003e {\n        return {\n            route: route,\n            result: location.pathname.match(pathToRegex(route.path))\n        };\n    });\n\n    let match = potentialMatches.find(potentialMatch =\u003e potentialMatch.result !== null);\n\n    if (!match) {\n        match = {\n            route: { path: '/404', view: { render: (container) =\u003e container.innerHTML = '\u003ch1\u003e404 Not Found\u003c/h1\u003e' } },\n            result: [location.pathname]\n        };\n    }\n\n    const params = getParams(match);\n    await match.route.view.render(mainContentContainer, params);\n};\n\nexport const initializeRouter = (container) =\u003e {\n    mainContentContainer = container;\n    window.addEventListener('popstate', handleRoute);\n    document.body.addEventListener('click', e =\u003e {\n        if (e.target.matches('[data-link]')) {\n            e.preventDefault();\n            navigate(e.target.href);\n        }\n    });\n    handleRoute();\n};\n",
  "client/js/services/applicationService.js": "import { getToken } from '../state/authState.js';\n\nconst API_BASE_URL = '/api';\n\nconst handleResponse = async (response) =\u003e {\n    if (response.status === 204) {\n        return null;\n    }\n    const data = await response.json();\n    if (!response.ok) {\n        throw new Error(data.message || `HTTP error! status: ${response.status}`);\n    }\n    return data;\n};\n\nconst authorizedFetch = async (url, options = {}) =\u003e {\n    const token = getToken();\n    const headers = {\n        'Content-Type': 'application/json',\n        ...options.headers,\n    };\n    if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n    }\n    const response = await fetch(url, { ...options, headers });\n    return handleResponse(response);\n};\n\nexport const ApplicationService = {\n    getApplications: () =\u003e authorizedFetch(`${API_BASE_URL}/applications`),\n    getApplication: (id) =\u003e authorizedFetch(`${API_BASE_URL}/applications/${id}`),\n    createApplication: (appData) =\u003e authorizedFetch(`${API_BASE_URL}/applications`, {\n        method: 'POST',\n        body: JSON.stringify(appData),\n    }),\n    updateApplication: (id, appData) =\u003e authorizedFetch(`${API_BASE_URL}/applications/${id}`, {\n        method: 'PUT',\n        body: JSON.stringify(appData),\n    }),\n    deleteApplication: (id) =\u003e authorizedFetch(`${API_BASE_URL}/applications/${id}`, {\n        method: 'DELETE',\n    }),\n};\n",
  "client/js/services/authService.js": "const API_BASE_URL = '/api';\n\nasync function handleResponse(response) {\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || `HTTP error! status: ${response.status}`);\n    }\n    return response.json();\n}\n\nexport const AuthService = {\n    login: async (email, password) =\u003e {\n        const response = await fetch(`${API_BASE_URL}/auth/login`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ email, password })\n        });\n        return handleResponse(response);\n    },\n\n    register: async (username, email, password) =\u003e {\n        const response = await fetch(`${API_BASE_URL}/auth/register`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ username, email, password })\n        });\n        return handleResponse(response);\n    },\n};\n",
  "client/js/state/authState.js": "let token = localStorage.getItem('jwt_token');\nlet user = null; // In a real app, you might fetch user details and store them here\n\nconst subscribers = new Set();\n\nconst notify = () =\u003e {\n    subscribers.forEach(callback =\u003e callback());\n};\n\nexport const setToken = (newToken) =\u003e {\n    token = newToken;\n    if (newToken) {\n        localStorage.setItem('jwt_token', newToken);\n    } else {\n        localStorage.removeItem('jwt_token');\n    }\n    notify();\n};\n\nexport const getToken = () =\u003e {\n    return token;\n};\n\nexport const isLoggedIn = () =\u003e {\n    return !!token;\n};\n\nexport const logout = () =\u003e {\n    setToken(null);\n};\n\nexport const subscribe = (callback) =\u003e {\n    subscribers.add(callback);\n    return () =\u003e subscribers.delete(callback); // Unsubscribe function\n};\n",
  "client/js/state/themeState.js": "let currentTheme = localStorage.getItem('theme') || 'light';\n\nconst applyTheme = (theme) =\u003e {\n    if (theme === 'dark') {\n        document.documentElement.classList.add('dark');\n    } else {\n        document.documentElement.classList.remove('dark');\n    }\n};\n\nexport const getTheme = () =\u003e currentTheme;\n\nexport const toggleTheme = () =\u003e {\n    currentTheme = currentTheme === 'light' ? 'dark' : 'light';\n    localStorage.setItem('theme', currentTheme);\n    applyTheme(currentTheme);\n    return currentTheme;\n};\n\nexport const initializeTheme = () =\u003e {\n    applyTheme(currentTheme);\n};\n",
  "client/js/views/DashboardView.js": "export const DashboardView = {\n    render: (container) =\u003e {\n        container.innerHTML = `\n            \u003cdiv\u003e\n                \u003ch1 class=\"text-3xl font-bold mb-6\"\u003eDashboard\u003c/h1\u003e\n                \u003cdiv class=\"p-6 bg-white dark:bg-gray-800 rounded-lg shadow\"\u003e\n                    \u003cp\u003eAnalytics and charts will be displayed here.\u003c/p\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        `;\n    }\n};\n```",
  "client/js/views/HomeView.js": "export const HomeView = {\n    render: (container) =\u003e {\n        container.innerHTML = `\n            \u003cdiv class=\"text-center py-16\"\u003e\n                \u003ch1 class=\"text-4xl font-bold mb-4\"\u003eWelcome to Job App Tracker\u003c/h1\u003e\n                \u003cp class=\"text-lg text-gray-600 dark:text-gray-400\"\u003eYour personal dashboard for managing job applications.\u003c/p\u003e\n            \u003c/div\u003e\n        `;\n    }\n};\n",
  "client/js/views/applications/ApplicationDetailView.js": "import { ApplicationService } from '../../services/applicationService.js';\nimport { navigate } from '../../router.js';\n\nexport const ApplicationDetailView = {\n    render: async (container, params) =\u003e {\n        container.innerHTML = `\u003cp\u003eLoading application details...\u003c/p\u003e`;\n\n        try {\n            const app = await ApplicationService.getApplication(params.id);\n            if (!app) {\n                container.innerHTML = `\u003cp\u003eApplication not found.\u003c/p\u003e`;\n                return;\n            }\n\n            const date = new Date(app.DateApplied).toLocaleDateString();\n\n            container.innerHTML = `\n                \u003cdiv class=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\"\u003e\n                    \u003cdiv class=\"flex justify-between items-start mb-4\"\u003e\n                        \u003cdiv\u003e\n                            \u003ch1 class=\"text-3xl font-bold\"\u003e${app.RoleID}\u003c/h1\u003e\n                            \u003cp class=\"text-xl text-gray-600 dark:text-gray-400\"\u003e${app.CompanyID}\u003c/p\u003e\n                        \u003c/div\u003e\n                        \u003ca href=\"/applications/${app.ID}/edit\" data-link class=\"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded\"\u003eEdit\u003c/a\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"space-y-2\"\u003e\n                        \u003cp\u003e\u003cstrong\u003eStatus:\u003c/strong\u003e ${app.Status}\u003c/p\u003e\n                        \u003cp\u003e\u003cstrong\u003eDate Applied:\u003c/strong\u003e ${date}\u003c/p\u003e\n                    \u003c/div\u003e\n                    \u003chr class=\"my-6 border-gray-200 dark:border-gray-700\"\u003e\n                    \u003ch2 class=\"text-2xl font-bold mb-4\"\u003eNotes\u003c/h2\u003e\n                    \u003cdiv id=\"notes-list\"\u003e\n                        \u003c!-- Notes will be rendered here --\u003e\n                        \u003cp class=\"text-gray-500\"\u003eNotes functionality coming soon.\u003c/p\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            `;\n        } catch (error) {\n            console.error('Failed to load application details:', error);\n            container.innerHTML = `\u003cp\u003eError loading application. You may not have permission to view this.\u003c/p\u003e`;\n        }\n    }\n};\n",
  "client/js/views/applications/ApplicationFormView.js": "import { ApplicationService } from '../../services/applicationService.js';\nimport { navigate } from '../../router.js';\n\nexport const ApplicationFormView = {\n    render: async (container, params) =\u003e {\n        const isEditing = !!params.id;\n        let app = { CompanyName: '', RoleTitle: '', Status: 'Applied', DateApplied: new Date().toISOString().split('T')[0] };\n\n        if (isEditing) {\n            try {\n                const existingApp = await ApplicationService.getApplication(params.id);\n                // TODO: The service returns IDs, not names. This is a placeholder.\n                // For a real implementation, the API should return joined data or we need separate lookups.\n                app.CompanyName = `CompanyID ${existingApp.CompanyID}`;\n                app.RoleTitle = `RoleID ${existingApp.RoleID}`;\n                app.Status = existingApp.Status;\n                app.DateApplied = new Date(existingApp.DateApplied).toISOString().split('T')[0];\n            } catch (error) {\n                container.innerHTML = `\u003cp\u003eCould not load application to edit.\u003c/p\u003e`;\n                return;\n            }\n        }\n\n        container.innerHTML = `\n            \u003ch1 class=\"text-3xl font-bold mb-6\"\u003e${isEditing ? 'Edit' : 'Add New'} Application\u003c/h1\u003e\n            \u003cform id=\"app-form\" class=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow space-y-4\"\u003e\n                \u003cdiv id=\"form-error\" class=\"hidden text-red-500 bg-red-100 dark:bg-red-900 p-3 rounded\"\u003e\u003c/div\u003e\n                \u003cdiv\u003e\n                    \u003clabel for=\"companyName\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\u003eCompany Name\u003c/label\u003e\n                    \u003cinput type=\"text\" id=\"companyName\" name=\"companyName\" required class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600\" value=\"${app.CompanyName}\"\u003e\n                \u003c/div\u003e\n                \u003cdiv\u003e\n                    \u003clabel for=\"roleTitle\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\u003eRole Title\u003c/label\u003e\n                    \u003cinput type=\"text\" id=\"roleTitle\" name=\"roleTitle\" required class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600\" value=\"${app.RoleTitle}\"\u003e\n                \u003c/div\u003e\n                \u003cdiv\u003e\n                    \u003clabel for=\"status\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\u003eStatus\u003c/label\u003e\n                    \u003cinput type=\"text\" id=\"status\" name=\"status\" required class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600\" value=\"${app.Status}\"\u003e\n                \u003c/div\u003e\n                \u003cdiv\u003e\n                    \u003clabel for=\"dateApplied\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\u003eDate Applied\u003c/label\u003e\n                    \u003cinput type=\"date\" id=\"dateApplied\" name=\"dateApplied\" required class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600\" value=\"${app.DateApplied}\"\u003e\n                \u003c/div\u003e\n                \u003cdiv class=\"flex justify-end\"\u003e\n                    \u003cbutton type=\"submit\" class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\u003e\n                        ${isEditing ? 'Save Changes' : 'Create Application'}\n                    \u003c/button\u003e\n                \u003c/div\u003e\n            \u003c/form\u003e\n        `;\n\n        const form = container.querySelector('#app-form');\n        form.addEventListener('submit', async (e) =\u003e {\n            e.preventDefault();\n            const formData = new FormData(form);\n            const data = Object.fromEntries(formData.entries());\n            const errorDiv = container.querySelector('#form-error');\n            errorDiv.classList.add('hidden');\n\n            try {\n                if (isEditing) {\n                    await ApplicationService.updateApplication(params.id, data);\n                    navigate(`/applications/${params.id}`);\n                } else {\n                    const newApp = await ApplicationService.createApplication(data);\n                    navigate(`/applications/${newApp.ID}`);\n                }\n            } catch (error) {\n                errorDiv.textContent = error.message;\n                errorDiv.classList.remove('hidden');\n            }\n        });\n    }\n};\n```",
  "client/js/views/applications/ApplicationListView.js": "import { ApplicationService } from '../../services/applicationService.js';\nimport { ApplicationCard } from '../../components/ApplicationCard.js';\nimport { navigate } from '../../router.js';\n\nexport const ApplicationListView = {\n    render: async (container) =\u003e {\n        container.innerHTML = `\n            \u003cdiv class=\"flex justify-between items-center mb-6\"\u003e\n                \u003ch1 class=\"text-3xl font-bold\"\u003eMy Applications\u003c/h1\u003e\n                \u003ca href=\"/applications/new\" data-link class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\u003e\n                    Add New Application\n                \u003c/a\u003e\n            \u003c/div\u003e\n            \u003cdiv id=\"application-list\" class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\"\u003e\n                \u003cp\u003eLoading applications...\u003c/p\u003e\n            \u003c/div\u003e\n        `;\n\n        try {\n            const applications = await ApplicationService.getApplications();\n            const appListContainer = container.querySelector('#application-list');\n            if (applications \u0026\u0026 applications.length \u003e 0) {\n                appListContainer.innerHTML = '';\n                applications.forEach(app =\u003e {\n                    appListContainer.appendChild(ApplicationCard(app));\n                });\n            } else {\n                appListContainer.innerHTML = '\u003cp\u003eNo applications found. Add one to get started!\u003c/p\u003e';\n            }\n        } catch (error) {\n            console.error('Failed to load applications:', error);\n            navigate('/login');\n        }\n    }\n};\n",
  "client/js/views/auth/LoginView.js": "import { AuthService } from '../../services/authService.js';\nimport { setToken } from '../../state/authState.js';\nimport { navigate } from '../../router.js';\n\nexport const LoginView = {\n    render: (container) =\u003e {\n        container.innerHTML = `\n            \u003cdiv class=\"max-w-md mx-auto mt-10 p-8 border rounded-lg shadow-lg bg-white dark:bg-gray-800\"\u003e\n                \u003ch2 class=\"text-2xl font-bold mb-6 text-center\"\u003eLogin\u003c/h2\u003e\n                \u003cform id=\"login-form\"\u003e\n                    \u003cdiv id=\"error-message\" class=\"hidden text-red-500 mb-4 p-2 bg-red-100 dark:bg-red-900 rounded\"\u003e\u003c/div\u003e\n                    \u003cdiv class=\"mb-4\"\u003e\n                        \u003clabel for=\"email\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\u003eEmail\u003c/label\u003e\n                        \u003cinput type=\"email\" id=\"email\" name=\"email\" required class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600\"\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"mb-6\"\u003e\n                        \u003clabel for=\"password\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\u003ePassword\u003c/label\u003e\n                        \u003cinput type=\"password\" id=\"password\" name=\"password\" required class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600\"\u003e\n                    \u003c/div\u003e\n                    \u003cbutton type=\"submit\" class=\"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\u003e\n                        Login\n                    \u003c/button\u003e\n                \u003c/form\u003e\n                \u003cp class=\"mt-4 text-center text-sm\"\u003e\n                    Don't have an account? \u003ca href=\"/register\" data-link class=\"text-blue-500 hover:underline\"\u003eRegister here\u003c/a\u003e.\n                \u003c/p\u003e\n            \u003c/div\u003e\n        `;\n\n        const form = container.querySelector('#login-form');\n        const errorMessage = container.querySelector('#error-message');\n        form.addEventListener('submit', async (e) =\u003e {\n            e.preventDefault();\n            errorMessage.classList.add('hidden');\n            const email = form.email.value;\n            const password = form.password.value;\n\n            try {\n                const data = await AuthService.login(email, password);\n                setToken(data.token);\n                navigate('/dashboard');\n            } catch (error) {\n                errorMessage.textContent = error.message;\n                errorMessage.classList.remove('hidden');\n            }\n        });\n    }\n};\n",
  "client/js/views/auth/RegisterView.js": "import { AuthService } from '../../services/authService.js';\nimport { navigate } from '../../router.js';\n\nexport const RegisterView = {\n    render: (container) =\u003e {\n        container.innerHTML = `\n            \u003cdiv class=\"max-w-md mx-auto mt-10 p-8 border rounded-lg shadow-lg bg-white dark:bg-gray-800\"\u003e\n                \u003ch2 class=\"text-2xl font-bold mb-6 text-center\"\u003eRegister\u003c/h2\u003e\n                \u003cform id=\"register-form\"\u003e\n                    \u003cdiv id=\"error-message\" class=\"hidden text-red-500 mb-4 p-2 bg-red-100 dark:bg-red-900 rounded\"\u003e\u003c/div\u003e\n                    \u003cdiv class=\"mb-4\"\u003e\n                        \u003clabel for=\"username\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\u003eUsername\u003c/label\u003e\n                        \u003cinput type=\"text\" id=\"username\" name=\"username\" required class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600\"\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"mb-4\"\u003e\n                        \u003clabel for=\"email\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\u003eEmail\u003c/label\u003e\n                        \u003cinput type=\"email\" id=\"email\" name=\"email\" required class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600\"\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\"mb-6\"\u003e\n                        \u003clabel for=\"password\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\u003ePassword\u003c/label\u003e\n                        \u003cinput type=\"password\" id=\"password\" name=\"password\" required class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600\"\u003e\n                    \u003c/div\u003e\n                    \u003cbutton type=\"submit\" class=\"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\u003e\n                        Register\n                    \u003c/button\u003e\n                \u003c/form\u003e\n                 \u003cp class=\"mt-4 text-center text-sm\"\u003e\n                    Already have an account? \u003ca href=\"/login\" data-link class=\"text-blue-500 hover:underline\"\u003eLogin here\u003c/a\u003e.\n                \u003c/p\u003e\n            \u003c/div\u003e\n        `;\n\n        const form = container.querySelector('#register-form');\n        const errorMessage = container.querySelector('#error-message');\n        form.addEventListener('submit', async (e) =\u003e {\n            e.preventDefault();\n            errorMessage.classList.add('hidden');\n            const username = form.username.value;\n            const email = form.email.value;\n            const password = form.password.value;\n\n            try {\n                await AuthService.register(username, email, password);\n                navigate('/login'); // Redirect to login after successful registration\n            } catch (error) {\n                errorMessage.textContent = error.message;\n                errorMessage.classList.remove('hidden');\n            }\n        });\n    }\n};\n",
  "cmd/server/main.go": "package main\n\nimport (\n\t\"fmt\"\n\t\"job-app-tracker/internal/handler\"\n\t\"job-app-tracker/internal/repository/postgres\"\n\t\"job-app-tracker/internal/usecase\"\n\t\"log\"\n\t\"os\"\n\n\t\"github.com/golang-migrate/migrate/v4\"\n\t_ \"github.com/golang-migrate/migrate/v4/database/postgres\"\n\t_ \"github.com/golang-migrate/migrate/v4/source/file\"\n\t\"github.com/jmoiron/sqlx\"\n\t\"github.com/joho/godotenv\"\n\t_ \"github.com/lib/pq\"\n)\n\nfunc main() {\n\terr := godotenv.Load()\n\tif err != nil {\n\t\tlog.Println(\"No .env file found, using environment variables\")\n\t}\n\n\tdatabaseURL := os.Getenv(\"DATABASE_URL\")\n\tif databaseURL == \"\" {\n\t\tlog.Fatal(\"DATABASE_URL is not set\")\n\t}\n\n\trunMigrations(databaseURL)\n\n\tdb, err := sqlx.Connect(\"postgres\", databaseURL)\n\tif err != nil {\n\t\tlog.Fatalf(\"Unable to connect to database: %v\\n\", err)\n\t}\n\tdefer db.Close()\n\n\t// Repositories\n\tuserRepo := postgres.NewPostgresUserRepository(db)\n\tcompanyRepo := postgres.NewPostgresCompanyRepository(db) // Corrected from ApplicationRepository\n\troleRepo := postgres.NewPostgresRoleRepository(db)\n\tappRepo := postgres.NewPostgresApplicationRepository(db) // Corrected from AppRepository\n\n\t// Use Cases\n\tuserUseCase := usecase.NewUserService(userRepo)\n\tappUseCase := usecase.NewApplicationService(appRepo, companyRepo, roleRepo)\n\n\t// Router\n\trouter := handler.NewRouter(userUseCase, appUseCase)\n\n\tport := os.Getenv(\"PORT\")\n\tif port == \"\" {\n\t\tport = \"8080\"\n\t}\n\n\tlog.Printf(\"Server starting on port %s\", port)\n\tif err := router.Start(\":\" + port); err != nil {\n\t\tlog.Fatalf(\"Failed to start server: %v\", err)\n\t}\n}\n\nfunc runMigrations(databaseURL string) {\n\tmigrationsPath := \"file://migrations\"\n\tm, err := migrate.New(migrationsPath, databaseURL)\n\tif err != nil {\n\t\tlog.Fatalf(\"Failed to create migrate instance: %v\", err)\n\t}\n\n\tif err := m.Up(); err != nil \u0026\u0026 err != migrate.ErrNoChange {\n\t\tlog.Fatalf(\"Failed to run migrations: %v\", err)\n\t} else if err == migrate.ErrNoChange {\n\t\tlog.Println(\"No new migrations to apply.\")\n\t} else {\n\t\tlog.Println(\"Migrations applied successfully.\")\n\t}\n}\n",
  "go.mod": "module job-app-tracker\n\ngo 1.21\n\nrequire (\n\tgithub.com/golang-jwt/jwt/v5 v5.2.1\n\tgithub.com/golang-migrate/migrate/v4 v4.17.1\n\tgithub.com/jackc/pgx/v5 v5.6.0\n\tgithub.com/jmoiron/sqlx v1.4.0\n\tgithub.com/joho/godotenv v1.5.1\n\tgithub.com/labstack/echo/v4 v4.12.0\n\tgolang.org/x/crypto v0.22.0\n)\n\nrequire (\n\tgithub.com/golang-jwt/jwt v3.2.2+incompatible // indirect\n\tgithub.com/hashicorp/errwrap v1.1.0 // indirect\n\tgithub.com/hashicorp/go-multierror v1.1.1 // indirect\n\tgithub.com/jackc/pgpassfile v1.0.0 // indirect\n\tgithub.com/jackc/pgservicefile v0.0.0-20221227161230-091c0ba34f0a // indirect\n\tgithub.com/jackc/puddle/v2 v2.2.1 // indirect\n\tgithub.com/labstack/gommon v0.4.2 // indirect\n\tgithub.com/lib/pq v1.10.9 // indirect\n\tgithub.com/mattn/go-colorable v0.1.13 // indirect\n\tgithub.com/mattn/go-isatty v0.0.20 // indirect\n\tgithub.com/valyala/bytebufferpool v1.0.0 // indirect\n\tgithub.com/valyala/fasttemplate v1.2.2 // indirect\n\tgo.uber.org/atomic v1.7.0 // indirect\n\tgolang.org/x/net v0.24.0 // indirect\n\tgolang.org/x/sync v0.1.0 // indirect\n\tgolang.org/x/sys v0.19.0 // indirect\n\tgolang.org/x/text v0.14.0 // indirect\n\tgolang.org/x/time v0.5.0 // indirect\n)\n",
  "internal/domain/application.go": "package domain\n\nimport (\n\t\"database/sql\"\n\t\"encoding/json\"\n\t\"time\"\n)\n\ntype Company struct {\n\tID             int64\n\tName           string\n\tNormalizedName string\n\tMetadata       json.RawMessage // JSON or JSONB\n}\n\ntype Role struct {\n\tID        int64\n\tCompanyID int64\n\tTitle     string\n\tMetadata  json.RawMessage // JSON or JSONB\n}\n\ntype Application struct {\n\tID            int64\n\tUserID        int64\n\tCompanyID     int64\n\tRoleID        int64\n\tDateApplied   time.Time\n\tStatus        string\n\tMetadata      json.RawMessage // JSON or JSONB\n\tCurrentNoteID sql.NullInt64\n}\n\ntype ApplicationNote struct {\n\tID            int64\n\tApplicationID int64\n\tUserID        int64\n\tTimestamp     time.Time\n\tContent       string\n}\n",
  "internal/domain/blog.go": "package domain\n\nimport (\n\t\"database/sql\"\n\t\"time\"\n)\n\ntype BlogPost struct {\n\tID                 int64\n\tUserID             int64\n\tTitle              string\n\tSlug               string\n\tContentMD          string\n\tContentHTML        string\n\tExcerpt            string\n\tIsPublic           bool\n\tCreatedAt          time.Time\n\tUpdatedAt          time.Time\n\tSEOMetaTitle       sql.NullString\n\tSEOMetaDescription sql.NullString\n\tTags               []string // Assuming tags are stored in a way that can be scanned into a slice, e.g., text[] in PostgreSQL\n}\n\ntype DraftVersion struct {\n\tID                 int64\n\tPostID             sql.NullInt64 // Null for brand new drafts\n\tUserID             int64\n\tContentMD          string\n\tContentHTML        string\n\tLastSavedAt        time.Time\n\tIsPublishedVersion bool\n}\n",
  "internal/domain/social.go": "package domain\n\nimport (\n\t\"time\"\n)\n\ntype ContentType string\n\nconst (\n\tContentTypePost    ContentType = \"post\"\n\tContentTypeComment ContentType = \"comment\"\n)\n\ntype Comment struct {\n\tID              int64\n\tPostID          int64\n\tUserID          int64\n\tParentCommentID int64 // Use 0 or a specific value for top-level comments if nullable is complex\n\tContentMD       string\n\tContentHTML     string\n\tCreatedAt       time.Time\n\tUpdatedAt       time.Time\n\tDepthLevel      int\n}\n\ntype Like struct {\n\tID          int64\n\tUserID      int64\n\tContentType ContentType\n\tContentID   int64\n}\n\ntype Follow struct {\n\tID             int64\n\tFollowerUserID int64\n\tFolloweeUserID int64\n}\n",
  "internal/domain/user.go": "package domain\n\nimport (\n\t\"database/sql\"\n\t\"encoding/json\"\n\t\"time\"\n)\n\ntype User struct {\n\tID             int64           `db:\"id\"`\n\tUsername       string          `db:\"username\"`\n\tEmail          string          `db:\"email\"`\n\tHashedPassword string          `db:\"hashed_password\"`\n\tBio            sql.NullString  `db:\"bio\"`\n\tAvatarURL      sql.NullString  `db:\"avatar_url\"`\n\tSettings       json.RawMessage `db:\"settings\"`\n\tCreatedAt      time.Time       `db:\"created_at\"`\n\tUpdatedAt      time.Time       `db:\"updated_at\"`\n}\n",
  "internal/handler/application_handler.go": "package handler\n\nimport (\n\t\"job-app-tracker/internal/usecase\"\n\t\"net/http\"\n\t\"strconv\"\n\n\t\"github.com/labstack/echo/v4\"\n)\n\ntype ApplicationHandler struct {\n\tappUseCase usecase.ApplicationUseCase\n}\n\nfunc NewApplicationHandler(uc usecase.ApplicationUseCase) *ApplicationHandler {\n\treturn \u0026ApplicationHandler{appUseCase: uc}\n}\n\ntype createApplicationRequest struct {\n\tCompanyName string `json:\"companyName\"`\n\tRoleTitle   string `json:\"roleTitle\"`\n\tStatus      string `json:\"status\"`\n\tDateApplied string `json:\"dateApplied\"` // YYYY-MM-DD\n}\n\nfunc (h *ApplicationHandler) CreateApplication(c echo.Context) error {\n\tuserID := c.Get(\"userID\").(int64)\n\treq := new(createApplicationRequest)\n\tif err := c.Bind(req); err != nil {\n\t\treturn c.JSON(http.StatusBadRequest, echo.Map{\"message\": \"Invalid request body\"})\n\t}\n\n\tapp, err := h.appUseCase.CreateApplication(userID, req.CompanyName, req.RoleTitle, req.Status, req.DateApplied)\n\tif err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, echo.Map{\"message\": \"Failed to create application\", \"error\": err.Error()})\n\t}\n\n\treturn c.JSON(http.StatusCreated, app)\n}\n\nfunc (h *ApplicationHandler) GetApplications(c echo.Context) error {\n\tuserID := c.Get(\"userID\").(int64)\n\tapps, err := h.appUseCase.GetApplications(userID)\n\tif err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, echo.Map{\"message\": \"Failed to get applications\"})\n\t}\n\treturn c.JSON(http.StatusOK, apps)\n}\n\nfunc (h *ApplicationHandler) GetApplicationByID(c echo.Context) error {\n\tuserID := c.Get(\"userID\").(int64)\n\tid, err := strconv.ParseInt(c.Param(\"id\"), 10, 64)\n\tif err != nil {\n\t\treturn c.JSON(http.StatusBadRequest, echo.Map{\"message\": \"Invalid application ID\"})\n\t}\n\n\tapp, err := h.appUseCase.GetApplicationByID(id, userID)\n\tif err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, echo.Map{\"message\": \"Failed to get application\"})\n\t}\n\tif app == nil {\n\t\treturn c.JSON(http.StatusNotFound, echo.Map{\"message\": \"Application not found\"})\n\t}\n\n\treturn c.JSON(http.StatusOK, app)\n}\n\nfunc (h *ApplicationHandler) UpdateApplication(c echo.Context) error {\n\tuserID := c.Get(\"userID\").(int64)\n\tid, err := strconv.ParseInt(c.Param(\"id\"), 10, 64)\n\tif err != nil {\n\t\treturn c.JSON(http.StatusBadRequest, echo.Map{\"message\": \"Invalid application ID\"})\n\t}\n\n\treq := new(createApplicationRequest)\n\tif err := c.Bind(req); err != nil {\n\t\treturn c.JSON(http.StatusBadRequest, echo.Map{\"message\": \"Invalid request body\"})\n\t}\n\n\tapp, err := h.appUseCase.UpdateApplication(id, userID, req.CompanyName, req.RoleTitle, req.Status, req.DateApplied)\n\tif err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, echo.Map{\"message\": \"Failed to update application\"})\n\t}\n\tif app == nil {\n\t\treturn c.JSON(http.StatusNotFound, echo.Map{\"message\": \"Application not found\"})\n\t}\n\n\treturn c.JSON(http.StatusOK, app)\n}\n\nfunc (h *ApplicationHandler) DeleteApplication(c echo.Context) error {\n\tuserID := c.Get(\"userID\").(int64)\n\tid, err := strconv.ParseInt(c.Param(\"id\"), 10, 64)\n\tif err != nil {\n\t\treturn c.JSON(http.StatusBadRequest, echo.Map{\"message\": \"Invalid application ID\"})\n\t}\n\n\tif err := h.appUseCase.DeleteApplication(id, userID); err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, echo.Map{\"message\": \"Failed to delete application\"})\n\t}\n\n\treturn c.NoContent(http.StatusNoContent)\n}\n",
  "internal/handler/auth_handler.go": "package handler\n\nimport (\n\t\"job-app-tracker/internal/usecase\"\n\t\"net/http\"\n\n\t\"github.com/labstack/echo/v4\"\n)\n\ntype AuthHandler struct {\n\tuserUseCase usecase.UserUseCase\n}\n\nfunc NewAuthHandler(uc usecase.UserUseCase) *AuthHandler {\n\treturn \u0026AuthHandler{userUseCase: uc}\n}\n\ntype RegisterRequest struct {\n\tUsername string `json:\"username\"`\n\tEmail    string `json:\"email\"`\n\tPassword string `json:\"password\"`\n}\n\ntype LoginRequest struct {\n\tEmail    string `json:\"email\"`\n\tPassword string `json:\"password\"`\n}\n\nfunc (h *AuthHandler) Register(c echo.Context) error {\n\tvar req RegisterRequest\n\tif err := c.Bind(\u0026req); err != nil {\n\t\treturn c.JSON(http.StatusBadRequest, map[string]string{\"error\": \"Invalid request payload\"})\n\t}\n\n\tuser, err := h.userUseCase.Register(req.Username, req.Email, req.Password)\n\tif err != nil {\n\t\treturn c.JSON(http.StatusConflict, map[string]string{\"error\": err.Error()})\n\t}\n\n\t// Don't send password back\n\tuser.HashedPassword = \"\"\n\n\treturn c.JSON(http.StatusCreated, user)\n}\n\nfunc (h *AuthHandler) Login(c echo.Context) error {\n\tvar req LoginRequest\n\tif err := c.Bind(\u0026req); err != nil {\n\t\treturn c.JSON(http.StatusBadRequest, map[string]string{\"error\": \"Invalid request payload\"})\n\t}\n\n\ttoken, err := h.userUseCase.Login(req.Email, req.Password)\n\tif err != nil {\n\t\treturn c.JSON(http.StatusUnauthorized, map[string]string{\"error\": \"Invalid credentials\"})\n\t}\n\n\treturn c.JSON(http.StatusOK, map[string]string{\"token\": token})\n}\n",
  "internal/handler/middleware.go": "package handler\n\nimport (\n\t\"job-app-tracker/pkg/util\"\n\t\"net/http\"\n\t\"strings\"\n\n\t\"github.com/labstack/echo/v4\"\n)\n\nfunc AuthMiddleware(next echo.HandlerFunc) echo.HandlerFunc {\n\treturn func(c echo.Context) error {\n\t\tauthHeader := c.Request().Header.Get(\"Authorization\")\n\t\tif authHeader == \"\" {\n\t\t\treturn c.JSON(http.StatusUnauthorized, map[string]string{\"error\": \"Missing authorization header\"})\n\t\t}\n\n\t\tparts := strings.Split(authHeader, \" \")\n\t\tif len(parts) != 2 || strings.ToLower(parts[0]) != \"bearer\" {\n\t\t\treturn c.JSON(http.StatusUnauthorized, map[string]string{\"error\": \"Invalid authorization header format\"})\n\t\t}\n\n\t\ttokenStr := parts[1]\n\t\tclaims, err := util.ValidateJWT(tokenStr)\n\t\tif err != nil {\n\t\t\treturn c.JSON(http.StatusUnauthorized, map[string]string{\"error\": \"Invalid token\"})\n\t\t}\n\n\t\tc.Set(\"userID\", claims.UserID)\n\t\tc.Set(\"username\", claims.Username)\n\n\t\treturn next(c)\n\t}\n}\n",
  "internal/handler/router.go": "package handler\n\nimport (\n\t\"job-app-tracker/internal/usecase\"\n\t\"net/http\" // Keep http import as it might be used elsewhere or for status codes\n\t\"os\"\n\t\"path/filepath\"\n\n\t\"github.com/labstack/echo/v4\"\n\t\"github.com/labstack/echo/v4/middleware\"\n)\n\nfunc NewRouter(userUC usecase.UserUseCase, appUC usecase.ApplicationUseCase) *echo.Echo {\n\te := echo.New()\n\n\te.Use(middleware.Logger())\n\te.Use(middleware.Recover())\n\n\tauthHandler := NewAuthHandler(userUC)\n\tappHandler := NewApplicationHandler(appUC)\n\n\tapiGroup := e.Group(\"/api\")\n\t{\n\t\tauthGroup := apiGroup.Group(\"/auth\")\n\t\t{\n\t\t\tauthGroup.POST(\"/register\", authHandler.Register)\n\t\t\tauthGroup.POST(\"/login\", authHandler.Login)\n\t\t}\n\n\t\tappGroup := apiGroup.Group(\"/applications\")\n\t\tappGroup.Use(AuthMiddleware)\n\t\t{\n\t\t\tappGroup.POST(\"\", appHandler.CreateApplication)\n\t\t\tappGroup.GET(\"\", appHandler.GetApplications)\n\t\t\tappGroup.GET(\"/:id\", appHandler.GetApplicationByID)\n\t\t\tappGroup.PUT(\"/:id\", appHandler.UpdateApplication)\n\t\t\tappGroup.DELETE(\"/:id\", appHandler.DeleteApplication)\n\t\t}\n\t}\n\n\t// Serve SPA\n\te.Use(middleware.StaticWithConfig(middleware.StaticConfig{\n\t\tRoot:   \"client\",\n\t\tHTML5:  true,\n\t\tBrowse: false,\n\t}))\n\n\treturn e\n}\n",
  "internal/repository/interfaces.go": "package repository\n\nimport \"job-app-tracker/internal/domain\"\n\ntype UserRepository interface {\n\tCreate(user *domain.User) error\n\tGetByEmail(email string) (*domain.User, error)\n\tGetByUsername(username string) (*domain.User, error)\n\tGetByID(id int64) (*domain.User, error)\n}\n\ntype CompanyRepository interface {\n\tFindOrCreate(company *domain.Company) error\n}\n\ntype RoleRepository interface {\n\tFindOrCreate(role *domain.Role) error\n}\n\ntype ApplicationRepository interface {\n\tCreate(app *domain.Application) error\n\tGetByID(id int64, userID int64) (*domain.Application, error)\n\tGetAllForUser(userID int64) ([]domain.Application, error)\n\tUpdate(app *domain.Application) error\n\tDelete(id int64, userID int64) error\n}\n\ntype ApplicationNoteRepository interface {\n\tCreate(note *domain.ApplicationNote) error\n\tGetAllForApplication(appID int64, userID int64) ([]domain.ApplicationNote, error)\n}\n",
  "internal/repository/postgres/application_repository.go": "package postgres\n\nimport (\n\t\"database/sql\"\n\t\"job-app-tracker/internal/domain\"\n\t\"strings\"\n\n\t\"github.com/jmoiron/sqlx\"\n)\n\ntype postgresApplicationRepository struct {\n\tdb *sqlx.DB\n}\n\nfunc NewPostgresApplicationRepository(db *sqlx.DB) *postgresApplicationRepository {\n\treturn \u0026postgresApplicationRepository{db: db}\n}\n\nfunc (r *postgresApplicationRepository) FindOrCreate(company *domain.Company) error {\n\tcompany.NormalizedName = strings.ToLower(strings.TrimSpace(company.Name))\n\tquery := `\n        INSERT INTO companies (name, normalized_name, metadata)\n        VALUES ($1, $2, $3)\n        ON CONFLICT (normalized_name) DO UPDATE SET name = companies.name\n        RETURNING id`\n\treturn r.db.QueryRow(query, company.Name, company.NormalizedName, company.Metadata).Scan(\u0026company.ID)\n}\n\ntype postgresRoleRepository struct {\n\tdb *sqlx.DB\n}\n\nfunc NewPostgresRoleRepository(db *sqlx.DB) *postgresRoleRepository {\n\treturn \u0026postgresRoleRepository{db: db}\n}\n\nfunc (r *postgresRoleRepository) FindOrCreate(role *domain.Role) error {\n\tquery := `\n        INSERT INTO roles (company_id, title, metadata)\n        VALUES ($1, $2, $3)\n        ON CONFLICT (company_id, title) DO UPDATE SET title = roles.title\n        RETURNING id`\n\treturn r.db.QueryRow(query, role.CompanyID, role.Title, role.Metadata).Scan(\u0026role.ID)\n}\n\ntype postgresAppRepo struct {\n\tdb *sqlx.DB\n}\n\nfunc NewPostgresAppRepository(db *sqlx.DB) *postgresAppRepo {\n\treturn \u0026postgresAppRepo{db: db}\n}\n\nfunc (r *postgresAppRepo) Create(app *domain.Application) error {\n\tquery := `\n        INSERT INTO applications (user_id, company_id, role_id, date_applied, status, metadata)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, created_at, updated_at`\n\treturn r.db.QueryRow(query, app.UserID, app.CompanyID, app.RoleID, app.DateApplied, app.Status, app.Metadata).Scan(\u0026app.ID, \u0026app.CreatedAt, \u0026app.UpdatedAt)\n}\n\nfunc (r *postgresAppRepo) GetByID(id int64, userID int64) (*domain.Application, error) {\n\tvar app domain.Application\n\tquery := `SELECT * FROM applications WHERE id = $1 AND user_id = $2`\n\terr := r.db.Get(\u0026app, query, id, userID)\n\tif err == sql.ErrNoRows {\n\t\treturn nil, nil\n\t}\n\treturn \u0026app, err\n}\n\nfunc (r *postgresAppRepo) GetAllForUser(userID int64) ([]domain.Application, error) {\n\tvar apps []domain.Application\n\tquery := `SELECT * FROM applications WHERE user_id = $1 ORDER BY date_applied DESC`\n\terr := r.db.Select(\u0026apps, query, userID)\n\treturn apps, err\n}\n\nfunc (r *postgresAppRepo) Update(app *domain.Application) error {\n\tquery := `\n        UPDATE applications\n        SET company_id = $1, role_id = $2, date_applied = $3, status = $4, metadata = $5, updated_at = NOW()\n        WHERE id = $6 AND user_id = $7\n        RETURNING updated_at`\n\treturn r.db.QueryRow(query, app.CompanyID, app.RoleID, app.DateApplied, app.Status, app.Metadata, app.ID, app.UserID).Scan(\u0026app.UpdatedAt)\n}\n\nfunc (r *postgresAppRepo) Delete(id int64, userID int64) error {\n\tquery := `DELETE FROM applications WHERE id = $1 AND user_id = $2`\n\t_, err := r.db.Exec(query, id, userID)\n\treturn err\n}\n\ntype postgresAppNoteRepository struct {\n\tdb *sqlx.DB\n}\n\nfunc NewPostgresAppNoteRepository(db *sqlx.DB) *postgresAppNoteRepository {\n\treturn \u0026postgresAppNoteRepository{db: db}\n}\n\nfunc (r *postgresAppNoteRepository) Create(note *domain.ApplicationNote) error {\n\tquery := `\n        INSERT INTO application_notes (application_id, user_id, content)\n        VALUES ($1, $2, $3)\n        RETURNING id, created_at`\n\treturn r.db.QueryRow(query, note.ApplicationID, note.UserID, note.Content).Scan(\u0026note.ID, \u0026note.CreatedAt)\n}\n\nfunc (r *postgresAppNoteRepository) GetAllForApplication(appID int64, userID int64) ([]domain.ApplicationNote, error) {\n\tvar notes []domain.ApplicationNote\n\t// Ensure user owns the application for which notes are being fetched\n\tquery := `\n        SELECT an.* FROM application_notes an\n        JOIN applications a ON an.application_id = a.id\n        WHERE an.application_id = $1 AND a.user_id = $2\n        ORDER BY an.created_at DESC`\n\terr := r.db.Select(\u0026notes, query, appID, userID)\n\treturn notes, err\n}\n",
  "internal/repository/postgres/user_repository.go": "package postgres\n\nimport (\n\t\"database/sql\"\n\t\"job-app-tracker/internal/domain\"\n\t\"job-app-tracker/internal/repository\"\n\n\t\"github.com/jmoiron/sqlx\"\n)\n\ntype postgresUserRepository struct {\n\tdb *sqlx.DB\n}\n\nfunc NewPostgresUserRepository(db *sqlx.DB) repository.UserRepository {\n\treturn \u0026postgresUserRepository{db: db}\n}\n\nfunc (r *postgresUserRepository) Create(user *domain.User) error {\n\tquery := `INSERT INTO users (username, email, hashed_password) VALUES ($1, $2, $3) RETURNING id, created_at, updated_at`\n\treturn r.db.QueryRow(query, user.Username, user.Email, user.HashedPassword).Scan(\u0026user.ID, \u0026user.CreatedAt, \u0026user.UpdatedAt)\n}\n\nfunc (r *postgresUserRepository) GetByEmail(email string) (*domain.User, error) {\n\tvar user domain.User\n\tquery := `SELECT id, username, email, hashed_password, bio, avatar_url, settings, created_at, updated_at FROM users WHERE email = $1`\n\terr := r.db.Get(\u0026user, query, email)\n\tif err == sql.ErrNoRows {\n\t\treturn nil, nil // Not an error, just no user found\n\t}\n\treturn \u0026user, err\n}\n\nfunc (r *postgresUserRepository) GetByUsername(username string) (*domain.User, error) {\n\tvar user domain.User\n\tquery := `SELECT id, username, email, hashed_password, bio, avatar_url, settings, created_at, updated_at FROM users WHERE username = $1`\n\terr := r.db.Get(\u0026user, query, username)\n\tif err == sql.ErrNoRows {\n\t\treturn nil, nil // Not an error, just no user found\n\t}\n\treturn \u0026user, err\n}\n\nfunc (r *postgresUserRepository) GetByID(id int64) (*domain.User, error) {\n\tvar user domain.User\n\tquery := `SELECT id, username, email, hashed_password, bio, avatar_url, settings, created_at, updated_at FROM users WHERE id = $1`\n\terr := r.db.Get(\u0026user, query, id)\n\tif err == sql.ErrNoRows {\n\t\treturn nil, nil\n\t}\n\treturn \u0026user, err\n}\n",
  "internal/usecase/application_service.go": "package usecase\n\nimport (\n\t\"job-app-tracker/internal/domain\"\n\t\"job-app-tracker/internal/repository\"\n\t\"time\"\n)\n\ntype applicationService struct {\n\tappRepo     repository.ApplicationRepository\n\tcompanyRepo repository.CompanyRepository\n\troleRepo    repository.RoleRepository\n}\n\nfunc NewApplicationService(appRepo repository.ApplicationRepository, companyRepo repository.CompanyRepository, roleRepo repository.RoleRepository) ApplicationUseCase {\n\treturn \u0026applicationService{\n\t\tappRepo:     appRepo,\n\t\tcompanyRepo: companyRepo,\n\t\troleRepo:    roleRepo,\n\t}\n}\n\nfunc (s *applicationService) CreateApplication(userID int64, companyName, roleTitle, status, dateAppliedStr string) (*domain.Application, error) {\n\tcompany := \u0026domain.Company{Name: companyName}\n\tif err := s.companyRepo.FindOrCreate(company); err != nil {\n\t\treturn nil, err\n\t}\n\n\trole := \u0026domain.Role{CompanyID: company.ID, Title: roleTitle}\n\tif err := s.roleRepo.FindOrCreate(role); err != nil {\n\t\treturn nil, err\n\t}\n\n\tdate, err := time.Parse(\"2006-01-02\", dateAppliedStr)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\tapp := \u0026domain.Application{\n\t\tUserID:      userID,\n\t\tCompanyID:   company.ID,\n\t\tRoleID:      role.ID,\n\t\tDateApplied: date,\n\t\tStatus:      status,\n\t}\n\n\tif err := s.appRepo.Create(app); err != nil {\n\t\treturn nil, err\n\t}\n\n\treturn app, nil\n}\n\nfunc (s *applicationService) GetApplications(userID int64) ([]domain.Application, error) {\n\treturn s.appRepo.GetAllForUser(userID)\n}\n\nfunc (s *applicationService) GetApplicationByID(id, userID int64) (*domain.Application, error) {\n\treturn s.appRepo.GetByID(id, userID)\n}\n\nfunc (s *applicationService) UpdateApplication(id, userID int64, companyName, roleTitle, status, dateAppliedStr string) (*domain.Application, error) {\n\tapp, err := s.appRepo.GetByID(id, userID)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tif app == nil {\n\t\treturn nil, nil // Or return an error for not found\n\t}\n\n\tcompany := \u0026domain.Company{Name: companyName}\n\tif err := s.companyRepo.FindOrCreate(company); err != nil {\n\t\treturn nil, err\n\t}\n\n\trole := \u0026domain.Role{CompanyID: company.ID, Title: roleTitle}\n\tif err := s.roleRepo.FindOrCreate(role); err != nil {\n\t\treturn nil, err\n\t}\n\n\tdate, err := time.Parse(\"2006-01-02\", dateAppliedStr)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\tapp.CompanyID = company.ID\n\tapp.RoleID = role.ID\n\tapp.Status = status\n\tapp.DateApplied = date\n\n\tif err := s.appRepo.Update(app); err != nil {\n\t\treturn nil, err\n\t}\n\n\treturn app, nil\n}\n\nfunc (s *applicationService) DeleteApplication(id, userID int64) error {\n\treturn s.appRepo.Delete(id, userID)\n}\n",
  "internal/usecase/interfaces.go": "package usecase\n\nimport \"job-app-tracker/internal/domain\"\n\ntype UserUseCase interface {\n\tRegister(username, email, password string) (*domain.User, error)\n\tLogin(email, password string) (string, error)\n}\n\ntype ApplicationUseCase interface {\n\tCreateApplication(userID int64, companyName, roleTitle, status, dateApplied string) (*domain.Application, error)\n\tGetApplications(userID int64) ([]domain.Application, error)\n\tGetApplicationByID(id, userID int64) (*domain.Application, error)\n\tUpdateApplication(id, userID int64, companyName, roleTitle, status, dateApplied string) (*domain.Application, error)\n\tDeleteApplication(id, userID int64) error\n}\n",
  "internal/usecase/user_service.go": "package usecase\n\nimport (\n\t\"errors\"\n\t\"job-app-tracker/internal/domain\"\n\t\"job-app-tracker/internal/repository\"\n\t\"job-app-tracker/pkg/util\"\n)\n\ntype userService struct {\n\tuserRepo repository.UserRepository\n}\n\nfunc NewUserService(userRepo repository.UserRepository) UserUseCase {\n\treturn \u0026userService{userRepo: userRepo}\n}\n\nfunc (s *userService) Register(username, email, password string) (*domain.User, error) {\n\t// Basic validation\n\tif username == \"\" || email == \"\" || password == \"\" {\n\t\treturn nil, errors.New(\"username, email, and password are required\")\n\t}\n\n\t// Check if user already exists\n\texistingUser, err := s.userRepo.GetByEmail(email)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tif existingUser != nil {\n\t\treturn nil, errors.New(\"user with this email already exists\")\n\t}\n\n\texistingUser, err = s.userRepo.GetByUsername(username)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tif existingUser != nil {\n\t\treturn nil, errors.New(\"username is already taken\")\n\t}\n\n\t// Hash password\n\thashedPassword, err := util.HashPassword(password)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\t// Create user\n\tuser := \u0026domain.User{\n\t\tUsername:       username,\n\t\tEmail:          email,\n\t\tHashedPassword: hashedPassword,\n\t}\n\n\tif err := s.userRepo.Create(user); err != nil {\n\t\treturn nil, err\n\t}\n\n\treturn user, nil\n}\n\nfunc (s *userService) Login(email, password string) (string, error) {\n\tuser, err := s.userRepo.GetByEmail(email)\n\tif err != nil {\n\t\treturn \"\", err\n\t}\n\tif user == nil {\n\t\treturn \"\", errors.New(\"invalid credentials\")\n\t}\n\n\tif !util.CheckPasswordHash(password, user.HashedPassword) {\n\t\treturn \"\", errors.New(\"invalid credentials\")\n\t}\n\n\ttoken, err := util.GenerateJWT(user.ID, user.Username)\n\tif err != nil {\n\t\treturn \"\", err\n\t}\n\n\treturn token, nil\n}\n",
  "migrations/000001_create_users_table.up.sql": "CREATE TABLE IF NOT EXISTS users (\n    id BIGSERIAL PRIMARY KEY,\n    username VARCHAR(50) UNIQUE NOT NULL,\n    email VARCHAR(255) UNIQUE NOT NULL,\n    hashed_password VARCHAR(255) NOT NULL,\n    bio TEXT,\n    avatar_url VARCHAR(255),\n    settings JSONB,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n);\n",
  "migrations/000002_create_application_tables.up.sql": "CREATE TABLE companies (\n    id BIGSERIAL PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    normalized_name VARCHAR(255) NOT NULL UNIQUE,\n    metadata JSONB\n);\n\nCREATE TABLE roles (\n    id BIGSERIAL PRIMARY KEY,\n    company_id BIGINT NOT NULL REFERENCES companies(id) ON DELETE CASCADE,\n    title VARCHAR(255) NOT NULL,\n    metadata JSONB,\n    UNIQUE(company_id, title)\n);\n\nCREATE TABLE applications (\n    id BIGSERIAL PRIMARY KEY,\n    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n    company_id BIGINT NOT NULL REFERENCES companies(id) ON DELETE CASCADE,\n    role_id BIGINT NOT NULL REFERENCES roles(id) ON DELETE CASCADE,\n    date_applied DATE NOT NULL,\n    status VARCHAR(50) NOT NULL,\n    metadata JSONB,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n);\n\nCREATE TABLE application_notes (\n    id BIGSERIAL PRIMARY KEY,\n    application_id BIGINT NOT NULL REFERENCES applications(id) ON DELETE CASCADE,\n    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n    content TEXT NOT NULL,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n);\n\nCREATE INDEX idx_applications_user_id ON applications(user_id);\nCREATE INDEX idx_applications_status ON applications(status);\nCREATE INDEX idx_application_notes_application_id ON application_notes(application_id);\n",
  "pkg/util/hash.go": "package util\n\nimport \"golang.org/x/crypto/bcrypt\"\n\n// HashPassword generates a bcrypt hash of the password.\nfunc HashPassword(password string) (string, error) {\n\tbytes, err := bcrypt.GenerateFromPassword([]byte(password), 14)\n\treturn string(bytes), err\n}\n\n// CheckPasswordHash compares a password with its hash.\nfunc CheckPasswordHash(password, hash string) bool {\n\terr := bcrypt.CompareHashAndPassword([]byte(hash), []byte(password))\n\treturn err == nil\n}\n",
  "pkg/util/jwt.go": "package util\n\nimport (\n\t\"fmt\"\n\t\"time\"\n\n\t\"github.com/golang-jwt/jwt/v5\"\n)\n\nvar jwtSecret = []byte(\"a_very_secret_key_that_should_be_in_env\") // TODO: Move to config\n\ntype Claims struct {\n\tUserID   int64  `json:\"user_id\"`\n\tUsername string `json:\"username\"`\n\tjwt.RegisteredClaims\n}\n\nfunc GenerateJWT(userID int64, username string) (string, error) {\n\texpirationTime := time.Now().Add(24 * time.Hour)\n\tclaims := \u0026Claims{\n\t\tUserID:   userID,\n\t\tUsername: username,\n\t\tRegisteredClaims: jwt.RegisteredClaims{\n\t\t\tExpiresAt: jwt.NewNumericDate(expirationTime),\n\t\t},\n\t}\n\n\ttoken := jwt.NewWithClaims(jwt.SigningMethodHS256, claims)\n\treturn token.SignedString(jwtSecret)\n}\n\nfunc ValidateJWT(tokenStr string) (*Claims, error) {\n\tclaims := \u0026Claims{}\n\ttoken, err := jwt.ParseWithClaims(tokenStr, claims, func(token *jwt.Token) (interface{}, error) {\n\t\treturn jwtSecret, nil\n\t})\n\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\tif !token.Valid {\n\t\treturn nil, fmt.Errorf(\"invalid token\")\n\t}\n\n\treturn claims, nil\n}\n"
}